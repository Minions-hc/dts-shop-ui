{"remainingRequest":"C:\\dts-shop\\admin-ui\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js!C:\\dts-shop\\admin-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\dts-shop\\admin-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\dts-shop\\admin-ui\\src\\views\\mall\\order.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\dts-shop\\admin-ui\\src\\views\\mall\\order.vue","mtime":1714111780000},{"path":"C:\\dts-shop\\admin-ui\\babel.config.js","mtime":1714111780000},{"path":"C:\\dts-shop\\admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1742308433329},{"path":"C:\\dts-shop\\admin-ui\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1742308433476},{"path":"C:\\dts-shop\\admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1742308433329},{"path":"C:\\dts-shop\\admin-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1742308445120}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJDOi9kdHMtc2hvcC9hZG1pbi11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQuanMiKS5kZWZhdWx0OwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiKTsKdmFyIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQzovZHRzLXNob3AvYWRtaW4tdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVXaWxkY2FyZC5qcyIpKTsKdmFyIF9vcmRlciA9IHJlcXVpcmUoIkAvYXBpL2J1c2luZXNzL29yZGVyIik7CnZhciBfUGFnaW5hdGlvbiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQC9jb21wb25lbnRzL1BhZ2luYXRpb24iKSk7CnZhciBfcGVybWlzc2lvbiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQC91dGlscy9wZXJtaXNzaW9uIikpOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwoKLy8gU2Vjb25kYXJ5IHBhY2thZ2UgYmFzZWQgb24gZWwtcGFnaW5hdGlvbgovLyDmnYPpmZDliKTmlq3lh73mlbAKCnZhciBzdGF0dXNNYXAgPSB7CiAgMTAxOiAn5pyq5LuY5qy+JywKICAxMDI6ICfnlKjmiLflj5bmtognLAogIDEwMzogJ+ezu+e7n+WPlua2iCcsCiAgMjAxOiAn5bey5LuY5qy+JywKICAyMDI6ICfnlLPor7fpgIDmrL4nLAogIDIwMzogJ+W3sumAgOasvicsCiAgMzAxOiAn5bey5Y+R6LSnJywKICA0MDE6ICfnlKjmiLfmlLbotKcnLAogIDQwMjogJ+ezu+e7n+aUtui0pycKfTsKdmFyIF9kZWZhdWx0ID0gZXhwb3J0cy5kZWZhdWx0ID0gewogIG5hbWU6ICdPcmRlcicsCiAgY29tcG9uZW50czogewogICAgUGFnaW5hdGlvbjogX1BhZ2luYXRpb24uZGVmYXVsdAogIH0sCiAgZmlsdGVyczogewogICAgb3JkZXJTdGF0dXNGaWx0ZXI6IGZ1bmN0aW9uIG9yZGVyU3RhdHVzRmlsdGVyKHN0YXR1cykgewogICAgICByZXR1cm4gc3RhdHVzTWFwW3N0YXR1c107CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGlzdDogdW5kZWZpbmVkLAogICAgICB0b3RhbDogMCwKICAgICAgbGlzdExvYWRpbmc6IHRydWUsCiAgICAgIHNoaXBDaGFubmVsTGlzdDogW10sCiAgICAgIGxpc3RRdWVyeTogewogICAgICAgIHBhZ2U6IDEsCiAgICAgICAgbGltaXQ6IDIwLAogICAgICAgIGlkOiB1bmRlZmluZWQsCiAgICAgICAgbmFtZTogdW5kZWZpbmVkLAogICAgICAgIG9yZGVyU3RhdHVzQXJyYXk6IFtdLAogICAgICAgIHNvcnQ6ICdhZGRfdGltZScsCiAgICAgICAgb3JkZXI6ICdkZXNjJwogICAgICB9LAogICAgICBzdGF0dXNNYXA6IHN0YXR1c01hcCwKICAgICAgb3JkZXJEaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgb3JkZXJEZXRhaWw6IHsKICAgICAgICBvcmRlcjoge30sCiAgICAgICAgdXNlcjoge30sCiAgICAgICAgb3JkZXJHb29kczogW10KICAgICAgfSwKICAgICAgc2hpcEZvcm06IHsKICAgICAgICBvcmRlcklkOiB1bmRlZmluZWQsCiAgICAgICAgc2hpcENoYW5uZWw6IHVuZGVmaW5lZCwKICAgICAgICBzaGlwU246IHVuZGVmaW5lZAogICAgICB9LAogICAgICBzaGlwRGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIHJlZnVuZEZvcm06IHsKICAgICAgICBvcmRlcklkOiB1bmRlZmluZWQsCiAgICAgICAgcmVmdW5kTW9uZXk6IHVuZGVmaW5lZAogICAgICB9LAogICAgICByZWZ1bmREaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgZG93bmxvYWRMb2FkaW5nOiBmYWxzZQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldExpc3QoKTsKICAgIHRoaXMuZ2V0TGlzdFNoaXBDaGFubmVsKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBjaGVja1Blcm1pc3Npb246IF9wZXJtaXNzaW9uLmRlZmF1bHQsCiAgICBnZXRMaXN0OiBmdW5jdGlvbiBnZXRMaXN0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZTsKICAgICAgKDAsIF9vcmRlci5saXN0T3JkZXIpKHRoaXMubGlzdFF1ZXJ5KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzLmxpc3QgPSByZXNwb25zZS5kYXRhLmRhdGEuaXRlbXM7CiAgICAgICAgX3RoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLmRhdGEudG90YWw7CiAgICAgICAgX3RoaXMubGlzdExvYWRpbmcgPSBmYWxzZTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLmxpc3QgPSBbXTsKICAgICAgICBfdGhpcy50b3RhbCA9IDA7CiAgICAgICAgX3RoaXMubGlzdExvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0TGlzdFNoaXBDaGFubmVsOiBmdW5jdGlvbiBnZXRMaXN0U2hpcENoYW5uZWwoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICAoMCwgX29yZGVyLmxpc3RTaGlwQ2hhbm5lbCkoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMi5zaGlwQ2hhbm5lbExpc3QgPSByZXNwb25zZS5kYXRhLmRhdGEuc2hpcENoYW5uZWxMaXN0OwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVGaWx0ZXI6IGZ1bmN0aW9uIGhhbmRsZUZpbHRlcigpIHsKICAgICAgdGhpcy5saXN0UXVlcnkucGFnZSA9IDE7CiAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgfSwKICAgIGhhbmRsZURldGFpbDogZnVuY3Rpb24gaGFuZGxlRGV0YWlsKHJvdykgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgKDAsIF9vcmRlci5kZXRhaWxPcmRlcikocm93LmlkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMy5vcmRlckRldGFpbCA9IHJlc3BvbnNlLmRhdGEuZGF0YTsKICAgICAgfSk7CiAgICAgIHRoaXMub3JkZXJEaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBoYW5kbGVTaGlwOiBmdW5jdGlvbiBoYW5kbGVTaGlwKHJvdykgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKICAgICAgdGhpcy5zaGlwRm9ybS5vcmRlcklkID0gcm93LmlkOwogICAgICB0aGlzLnNoaXBGb3JtLnNoaXBDaGFubmVsID0gcm93LnNoaXBDaGFubmVsOwogICAgICB0aGlzLnNoaXBGb3JtLnNoaXBTbiA9IHJvdy5zaGlwU247CiAgICAgIHRoaXMuc2hpcERpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM0LiRyZWZzWydzaGlwRm9ybSddLmNsZWFyVmFsaWRhdGUoKTsKICAgICAgfSk7CiAgICB9LAogICAgY29uZmlybVNoaXA6IGZ1bmN0aW9uIGNvbmZpcm1TaGlwKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKICAgICAgdGhpcy4kcmVmc1snc2hpcEZvcm0nXS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgICgwLCBfb3JkZXIuc2hpcE9yZGVyKShfdGhpczUuc2hpcEZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIF90aGlzNS5zaGlwRGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICBfdGhpczUuJG5vdGlmeS5zdWNjZXNzKHsKICAgICAgICAgICAgICB0aXRsZTogJ+aIkOWKnycsCiAgICAgICAgICAgICAgbWVzc2FnZTogJ+ehruiupOWPkei0p+aIkOWKnycKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF90aGlzNS5nZXRMaXN0KCk7CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgX3RoaXM1LiRub3RpZnkuZXJyb3IoewogICAgICAgICAgICAgIHRpdGxlOiAn5aSx6LSlJywKICAgICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5kYXRhLmVycm1zZwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlUmVmdW5kOiBmdW5jdGlvbiBoYW5kbGVSZWZ1bmQocm93KSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwogICAgICB0aGlzLnJlZnVuZEZvcm0ub3JkZXJJZCA9IHJvdy5pZDsKICAgICAgdGhpcy5yZWZ1bmRGb3JtLnJlZnVuZE1vbmV5ID0gcm93LmFjdHVhbFByaWNlOwogICAgICB0aGlzLnJlZnVuZERpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM2LiRyZWZzWydyZWZ1bmRGb3JtJ10uY2xlYXJWYWxpZGF0ZSgpOwogICAgICB9KTsKICAgIH0sCiAgICBjb25maXJtUmVmdW5kOiBmdW5jdGlvbiBjb25maXJtUmVmdW5kKCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKICAgICAgdGhpcy4kcmVmc1sncmVmdW5kRm9ybSddLnZhbGlkYXRlKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgKDAsIF9vcmRlci5yZWZ1bmRPcmRlcikoX3RoaXM3LnJlZnVuZEZvcm0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIF90aGlzNy5yZWZ1bmREaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgIF90aGlzNy4kbm90aWZ5LnN1Y2Nlc3MoewogICAgICAgICAgICAgIHRpdGxlOiAn5oiQ5YqfJywKICAgICAgICAgICAgICBtZXNzYWdlOiAn56Gu6K6k6YCA5qy+5oiQ5YqfJwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgX3RoaXM3LmdldExpc3QoKTsKICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICBfdGhpczcuJG5vdGlmeS5lcnJvcih7CiAgICAgICAgICAgICAgdGl0bGU6ICflpLHotKUnLAogICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLmRhdGEuZXJybXNnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVEb3dubG9hZDogZnVuY3Rpb24gaGFuZGxlRG93bmxvYWQoKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwogICAgICB0aGlzLmRvd25sb2FkTG9hZGluZyA9IHRydWU7CiAgICAgIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiAoMCwgX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQyLmRlZmF1bHQpKHJlcXVpcmUoJ0AvdmVuZG9yL0V4cG9ydDJFeGNlbCcpKTsKICAgICAgfSkudGhlbihmdW5jdGlvbiAoZXhjZWwpIHsKICAgICAgICB2YXIgdEhlYWRlciA9IFsn6K6i5Y2VSUQnLCAn6K6i5Y2V57yW5Y+3JywgJ+eUqOaIt0lEJywgJ+iuouWNleeKtuaAgScsICfmmK/lkKbliKDpmaQnLCAn5pS26LSn5Lq6JywgJ+aUtui0p+iBlOezu+eUteivnScsICfmlLbotKflnLDlnYAnXTsKICAgICAgICB2YXIgZmlsdGVyVmFsID0gWydpZCcsICdvcmRlclNuJywgJ3VzZXJJZCcsICdvcmRlclN0YXR1cycsICdpc0RlbGV0ZScsICdjb25zaWduZWUnLCAnbW9iaWxlJywgJ2FkZHJlc3MnXTsKICAgICAgICBleGNlbC5leHBvcnRfanNvbl90b19leGNlbDIodEhlYWRlciwgX3RoaXM4Lmxpc3QsIGZpbHRlclZhbCwgJ+iuouWNleS/oeaBrycpOwogICAgICAgIF90aGlzOC5kb3dubG9hZExvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["_order","require","_Pagination","_interopRequireDefault","_permission","statusMap","_default","exports","default","name","components","Pagination","filters","orderStatusFilter","status","data","list","undefined","total","listLoading","shipChannelList","listQuery","page","limit","id","orderStatusArray","sort","order","orderDialogVisible","orderDetail","user","orderGoods","shipForm","orderId","shipChannel","shipSn","shipDialogVisible","refundForm","refundMoney","refundDialogVisible","downloadLoading","created","getList","getListShipChannel","methods","checkPermission","_this","listOrder","then","response","items","catch","_this2","listShipChannel","handleFilter","handleDetail","row","_this3","detailOrder","handleShip","_this4","$nextTick","$refs","clearValidate","confirmShip","_this5","validate","valid","shipOrder","$notify","success","title","message","error","errmsg","handleRefund","_this6","actualPrice","confirmRefund","_this7","refundOrder","handleDownload","_this8","Promise","resolve","_interopRequireWildcard2","excel","tHeader","filterVal","export_json_to_excel2"],"sources":["src/views/mall/order.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n\n    <!-- 查询和其他操作 -->\n    <div class=\"filter-container\">\n      <el-input v-model=\"listQuery.userId\" clearable size=\"mini\" class=\"filter-item\" style=\"width: 200px;\" placeholder=\"请输入用户ID\"/>\n      <el-input v-model=\"listQuery.orderSn\" clearable size=\"mini\" class=\"filter-item\" style=\"width: 200px;\" placeholder=\"请输入订单编号\"/>\n      <el-select v-model=\"listQuery.orderStatusArray\" multiple size=\"mini\" style=\"width: 200px\" class=\"filter-item\" placeholder=\"请选择订单状态\">\n        <el-option v-for=\"(key, value) in statusMap\" :key=\"key\" :label=\"key\" :value=\"value\"/>\n      </el-select>\n      <el-button v-permission=\"['GET /admin/order/list']\" size=\"mini\" class=\"filter-item\" type=\"primary\" icon=\"el-icon-search\" @click=\"handleFilter\">查找</el-button>\n      <el-button :loading=\"downloadLoading\" size=\"mini\" class=\"filter-item\" type=\"warning\" icon=\"el-icon-download\" @click=\"handleDownload\">导出</el-button>\n    </div>\n\n    <!-- 查询结果 -->\n    <el-table v-loading=\"listLoading\" :data=\"list\" size=\"small\" element-loading-text=\"正在查询中。。。\" border fit highlight-current-row>\n\n      <el-table-column align=\"center\" min-width=\"100\" label=\"订单编号\" prop=\"orderSn\" sortable/>\n\n      <el-table-column align=\"center\" min-width=\"100px\" label=\"用户ID\" prop=\"userId\"/>\n\n      <el-table-column align=\"center\" min-width=\"100px\" label=\"订单状态\" prop=\"orderStatus\">\n        <template slot-scope=\"scope\">\n          <el-tag>{{ scope.row.orderStatus | orderStatusFilter }}</el-tag>\n        </template>\n      </el-table-column>\n\n      <el-table-column align=\"center\" min-width=\"100px\" label=\"订单金额\" prop=\"orderPrice\"/>\n\n      <el-table-column align=\"center\" min-width=\"100px\" label=\"支付金额\" prop=\"actualPrice\"/>\n\n      <el-table-column align=\"center\" min-width=\"120px\" label=\"支付时间\" prop=\"payTime\"/>\n\n      <el-table-column align=\"center\" min-width=\"120px\" label=\"物流单号\" prop=\"shipSn\"/>\n\n      <el-table-column align=\"center\" min-width=\"100px\" label=\"物流渠道\" prop=\"shipChannel\"/>\n\n      <el-table-column align=\"center\" label=\"操作\" min-width=\"150px\" class-name=\"small-padding fixed-width\">\n        <template slot-scope=\"scope\">\n          <el-button v-permission=\"['GET /admin/order/detail']\" type=\"primary\" size=\"mini\" @click=\"handleDetail(scope.row)\">详情</el-button>\n          <el-button v-permission=\"['POST /admin/order/ship']\" v-if=\"scope.row.orderStatus==201\" type=\"primary\" size=\"mini\" @click=\"handleShip(scope.row)\">发货</el-button>\n          <el-button v-permission=\"['POST /admin/order/refund']\" v-if=\"scope.row.orderStatus==202\" type=\"primary\" size=\"mini\" @click=\"handleRefund(scope.row)\">退款</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <pagination v-show=\"total>0\" :total=\"total\" :page.sync=\"listQuery.page\" :limit.sync=\"listQuery.limit\" @pagination=\"getList\" />\n\n    <!-- 订单详情对话框 -->\n    <el-dialog :visible.sync=\"orderDialogVisible\" title=\"订单详情\" width=\"800\">\n      <el-form :data=\"orderDetail\" label-position=\"left\">\n        <el-form-item label=\"订单编号\">\n          <span>{{ orderDetail.order.orderSn }}</span>\n        </el-form-item>\n        <el-form-item label=\"订单状态\">\n          <template slot-scope=\"scope\">\n            <el-tag>{{ scope.order.orderStatus | orderStatusFilter }}</el-tag>\n          </template>\n        </el-form-item>\n        <el-form-item label=\"订单用户\">\n          <span>{{ orderDetail.user.nickname }}</span>\n        </el-form-item>\n        <el-form-item label=\"用户留言\">\n          <span>{{ orderDetail.order.message }}</span>\n        </el-form-item>\n        <el-form-item label=\"收货信息\">\n          <span>（收货人）{{ orderDetail.order.consignee }}</span>\n          <span>（手机号）{{ orderDetail.order.mobile }}</span>\n          <span>（地址）{{ orderDetail.order.address }}</span>\n        </el-form-item>\n        <el-form-item label=\"商品信息\">\n          <el-table :data=\"orderDetail.orderGoods\" size=\"small\" border fit highlight-current-row>\n            <el-table-column align=\"center\" label=\"商品名称\" prop=\"goodsName\" />\n            <el-table-column align=\"center\" label=\"商品编号\" prop=\"goodsSn\" />\n            <el-table-column align=\"center\" label=\"货品规格\" prop=\"specifications\" />\n            <el-table-column align=\"center\" label=\"货品价格\" prop=\"price\" />\n            <el-table-column align=\"center\" label=\"货品数量\" prop=\"number\" />\n            <el-table-column align=\"center\" label=\"货品图片\" prop=\"picUrl\">\n              <template slot-scope=\"scope\">\n                <img :src=\"scope.row.picUrl\" width=\"40\">\n              </template>\n            </el-table-column>\n          </el-table>\n        </el-form-item>\n        <el-form-item label=\"费用信息\">\n          <span>\n            (实际费用){{ orderDetail.order.actualPrice }}元 =\n            (商品总价){{ orderDetail.order.goodsPrice }}元 +\n            (快递费用){{ orderDetail.order.freightPrice }}元 -\n            (优惠减免){{ orderDetail.order.couponPrice }}元 -\n            (积分减免){{ orderDetail.order.integralPrice }}元\n          </span>\n        </el-form-item>\n        <el-form-item label=\"支付信息\">\n          <span>（支付渠道）微信支付</span>\n          <span>（支付时间）{{ orderDetail.order.payTime }}</span>\n        </el-form-item>\n        <el-form-item label=\"快递信息\">\n          <span>（快递公司）{{ orderDetail.order.shipChannel }}</span>\n          <span>（快递单号）{{ orderDetail.order.shipSn }}</span>\n          <span>（发货时间）{{ orderDetail.order.shipTime }}</span>\n        </el-form-item>\n        <el-form-item label=\"收货信息\">\n          <span>（确认收货时间）{{ orderDetail.order.confirmTime }}</span>\n        </el-form-item>\n      </el-form>\n    </el-dialog>\n\n    <!-- 发货对话框 -->\n    <el-dialog :visible.sync=\"shipDialogVisible\" title=\"发货\">\n      <el-form ref=\"shipForm\" :model=\"shipForm\" status-icon label-position=\"left\" label-width=\"100px\" style=\"width: 400px; margin-left:50px;\">\n        <el-form-item label=\"快递公司\" prop=\"shipChannel\">\n          <el-select v-model=\"shipForm.shipChannel\">\n            <el-option v-for=\"item in shipChannelList\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\"/>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"快递编号\" prop=\"shipSn\">\n          <el-input v-model=\"shipForm.shipSn\"/>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"shipDialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"confirmShip\">确定</el-button>\n      </div>\n    </el-dialog>\n\n    <!-- 退款对话框 -->\n    <el-dialog :visible.sync=\"refundDialogVisible\" title=\"退款\">\n      <el-form ref=\"refundForm\" :model=\"refundForm\" status-icon label-position=\"left\" label-width=\"100px\" style=\"width: 400px; margin-left:50px;\">\n        <el-form-item label=\"退款金额\" prop=\"refundMoney\">\n          <el-input v-model=\"refundForm.refundMoney\" :disabled=\"true\"/>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"refundDialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"confirmRefund\">确定</el-button>\n      </div>\n    </el-dialog>\n\n  </div>\n</template>\n\n<style>\n\n</style>\n\n<script>\nimport { listOrder, shipOrder, refundOrder, detailOrder, listShipChannel } from '@/api/business/order'\nimport Pagination from '@/components/Pagination' // Secondary package based on el-pagination\nimport checkPermission from '@/utils/permission' // 权限判断函数\n\nconst statusMap = {\n  101: '未付款',\n  102: '用户取消',\n  103: '系统取消',\n  201: '已付款',\n  202: '申请退款',\n  203: '已退款',\n  301: '已发货',\n  401: '用户收货',\n  402: '系统收货'\n}\n\nexport default {\n  name: 'Order',\n  components: { Pagination },\n  filters: {\n    orderStatusFilter(status) {\n      return statusMap[status]\n    }\n  },\n  data() {\n    return {\n      list: undefined,\n      total: 0,\n      listLoading: true,\n      shipChannelList: [],\n      listQuery: {\n        page: 1,\n        limit: 20,\n        id: undefined,\n        name: undefined,\n        orderStatusArray: [],\n        sort: 'add_time',\n        order: 'desc'\n      },\n      statusMap,\n      orderDialogVisible: false,\n      orderDetail: {\n        order: {},\n        user: {},\n        orderGoods: []\n      },\n      shipForm: {\n        orderId: undefined,\n        shipChannel: undefined,\n        shipSn: undefined\n      },\n      shipDialogVisible: false,\n      refundForm: {\n        orderId: undefined,\n        refundMoney: undefined\n      },\n      refundDialogVisible: false,\n      downloadLoading: false\n    }\n  },\n  created() {\n    this.getList()\n    this.getListShipChannel()\n  },\n  methods: {\n    checkPermission,\n    getList() {\n      this.listLoading = true\n      listOrder(this.listQuery).then(response => {\n        this.list = response.data.data.items\n        this.total = response.data.data.total\n        this.listLoading = false\n      }).catch(() => {\n        this.list = []\n        this.total = 0\n        this.listLoading = false\n      })\n    },\n    getListShipChannel() {\n      listShipChannel().then(response => {\n        this.shipChannelList = response.data.data.shipChannelList\n      })\n    },\n    handleFilter() {\n      this.listQuery.page = 1\n      this.getList()\n    },\n    handleDetail(row) {\n      detailOrder(row.id).then(response => {\n        this.orderDetail = response.data.data\n      })\n      this.orderDialogVisible = true\n    },\n    handleShip(row) {\n      this.shipForm.orderId = row.id\n      this.shipForm.shipChannel = row.shipChannel\n      this.shipForm.shipSn = row.shipSn\n\n      this.shipDialogVisible = true\n      this.$nextTick(() => {\n        this.$refs['shipForm'].clearValidate()\n      })\n    },\n    confirmShip() {\n      this.$refs['shipForm'].validate((valid) => {\n        if (valid) {\n          shipOrder(this.shipForm).then(response => {\n            this.shipDialogVisible = false\n            this.$notify.success({\n              title: '成功',\n              message: '确认发货成功'\n            })\n            this.getList()\n          }).catch(response => {\n            this.$notify.error({\n              title: '失败',\n              message: response.data.errmsg\n            })\n          })\n        }\n      })\n    },\n    handleRefund(row) {\n      this.refundForm.orderId = row.id\n      this.refundForm.refundMoney = row.actualPrice\n\n      this.refundDialogVisible = true\n      this.$nextTick(() => {\n        this.$refs['refundForm'].clearValidate()\n      })\n    },\n    confirmRefund() {\n      this.$refs['refundForm'].validate((valid) => {\n        if (valid) {\n          refundOrder(this.refundForm).then(response => {\n            this.refundDialogVisible = false\n            this.$notify.success({\n              title: '成功',\n              message: '确认退款成功'\n            })\n            this.getList()\n          }).catch(response => {\n            this.$notify.error({\n              title: '失败',\n              message: response.data.errmsg\n            })\n          })\n        }\n      })\n    },\n    handleDownload() {\n      this.downloadLoading = true\n      import('@/vendor/Export2Excel').then(excel => {\n        const tHeader = ['订单ID', '订单编号', '用户ID', '订单状态', '是否删除', '收货人', '收货联系电话', '收货地址']\n        const filterVal = ['id', 'orderSn', 'userId', 'orderStatus', 'isDelete', 'consignee', 'mobile', 'address']\n        excel.export_json_to_excel2(tHeader, this.list, filterVal, '订单信息')\n        this.downloadLoading = false\n      })\n    }\n  }\n}\n</script>\n"],"mappings":"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","ignoreList":[]}]}