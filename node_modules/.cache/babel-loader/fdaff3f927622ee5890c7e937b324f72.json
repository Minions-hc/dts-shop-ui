{"remainingRequest":"C:\\dts-shop\\admin-ui\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js!C:\\dts-shop\\admin-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\dts-shop\\admin-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\dts-shop\\admin-ui\\src\\views\\promotion\\articleEdit.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\dts-shop\\admin-ui\\src\\views\\promotion\\articleEdit.vue","mtime":1714111780000},{"path":"C:\\dts-shop\\admin-ui\\babel.config.js","mtime":1714111780000},{"path":"C:\\dts-shop\\admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1742308433329},{"path":"C:\\dts-shop\\admin-ui\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1742308433476},{"path":"C:\\dts-shop\\admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1742308433329},{"path":"C:\\dts-shop\\admin-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1742308445120}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJDOi9kdHMtc2hvcC9hZG1pbi11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQuanMiKS5kZWZhdWx0OwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnB1c2guanMiKTsKdmFyIF9hcnRpY2xlID0gcmVxdWlyZSgiQC9hcGkvYnVzaW5lc3MvYXJ0aWNsZSIpOwp2YXIgX3N0b3JhZ2UgPSByZXF1aXJlKCJAL2FwaS9idXNpbmVzcy9zdG9yYWdlIik7CnZhciBfdGlueW1jZVZ1ZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQHRpbnltY2UvdGlueW1jZS12dWUiKSk7CnZhciBfZWxlbWVudFVpID0gcmVxdWlyZSgiZWxlbWVudC11aSIpOwp2YXIgX2F1dGggPSByZXF1aXJlKCJAL3V0aWxzL2F1dGgiKTsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KdmFyIF9kZWZhdWx0ID0gZXhwb3J0cy5kZWZhdWx0ID0gewogIG5hbWU6ICdBcnRpY2xlRWRpdCcsCiAgY29tcG9uZW50czogewogICAgRWRpdG9yOiBfdGlueW1jZVZ1ZS5kZWZhdWx0CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXBsb2FkUGF0aDogX3N0b3JhZ2UudXBsb2FkUGF0aCwKICAgICAgYXJ0aWNsZToge30sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgdGl0bGU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfmoIfpopjkuI3og73kuLrnqbonLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgY29udGVudDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+S/oeaBr+WGheWuueS4jeiDveS4uuepuicsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XQogICAgICB9LAogICAgICBlZGl0b3JJbml0OiB7CiAgICAgICAgbGFuZ3VhZ2U6ICd6aF9DTicsCiAgICAgICAgY29udmVydF91cmxzOiBmYWxzZSwKICAgICAgICBwbHVnaW5zOiBbJ2Fkdmxpc3QgYW5jaG9yIGF1dG9saW5rIGF1dG9zYXZlIGNvZGUgY29kZXNhbXBsZSBjb2xvcnBpY2tlciBjb2xvcnBpY2tlciBjb250ZXh0bWVudSBkaXJlY3Rpb25hbGl0eSBlbW90aWNvbnMgZnVsbHNjcmVlbiBociBpbWFnZSBpbWFnZXRvb2xzIGltcG9ydGNzcyBpbnNlcnRkYXRldGltZSBsaW5rIGxpc3RzIG1lZGlhIG5vbmJyZWFraW5nIG5vbmVkaXRhYmxlIHBhZ2VicmVhayBwYXN0ZSBwcmV2aWV3IHByaW50IHNhdmUgc2VhcmNocmVwbGFjZSBzcGVsbGNoZWNrZXIgdGFiZm9jdXMgdGFibGUgdGVtcGxhdGUgdGV4dGNvbG9yIHRleHRwYXR0ZXJuIHZpc3VhbGJsb2NrcyB2aXN1YWxjaGFycyB3b3JkY291bnQnXSwKICAgICAgICB0b29sYmFyOiBbJ3NlYXJjaHJlcGxhY2UgYm9sZCBpdGFsaWMgdW5kZXJsaW5lIHN0cmlrZXRocm91Z2ggYWxpZ25sZWZ0IGFsaWduY2VudGVyIGFsaWducmlnaHQgb3V0ZGVudCBpbmRlbnQgIGJsb2NrcXVvdGUgdW5kbyByZWRvIHJlbW92ZWZvcm1hdCBzdWJzY3JpcHQgc3VwZXJzY3JpcHQgY29kZSBjb2Rlc2FtcGxlJywgJ2hyIGJ1bGxpc3QgbnVtbGlzdCBsaW5rIGltYWdlIGNoYXJtYXAgcHJldmlldyBhbmNob3IgcGFnZWJyZWFrIGluc2VydGRhdGV0aW1lIG1lZGlhIHRhYmxlIGVtb3RpY29ucyBmb3JlY29sb3IgYmFja2NvbG9yIGZ1bGxzY3JlZW4nXSwKICAgICAgICBpbWFnZXNfdXBsb2FkX2hhbmRsZXI6IGZ1bmN0aW9uIGltYWdlc191cGxvYWRfaGFuZGxlcihibG9iSW5mbywgc3VjY2VzcywgZmFpbHVyZSkgewogICAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCBibG9iSW5mby5ibG9iKCkpOwogICAgICAgICAgKDAsIF9zdG9yYWdlLmNyZWF0ZVN0b3JhZ2UpKGZvcm1EYXRhKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgc3VjY2VzcyhyZXMuZGF0YS5kYXRhLnVybCk7CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGZhaWx1cmUoJ+S4iuS8oOWksei0pe+8jOivt+mHjeaWsOS4iuS8oCcpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGhlYWRlcnM6IGZ1bmN0aW9uIGhlYWRlcnMoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgJ1gtRHRzLUFkbWluLVRva2VuJzogKDAsIF9hdXRoLmdldFRva2VuKSgpCiAgICAgIH07CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5pbml0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0OiBmdW5jdGlvbiBpbml0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBpZiAodGhpcy4kcm91dGUucXVlcnkuaWQgPT0gbnVsbCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgYXJ0aWNsZUlkID0gdGhpcy4kcm91dGUucXVlcnkuaWQ7CiAgICAgICgwLCBfYXJ0aWNsZS5kZXRhaWxBcnRpY2xlKShhcnRpY2xlSWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMuYXJ0aWNsZSA9IHJlc3BvbnNlLmRhdGEuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlQ2FuY2VsOiBmdW5jdGlvbiBoYW5kbGVDYW5jZWwoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiAnL3Byb21vdGlvbi9hcnRpY2xlTGlzdCcKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlRWRpdDogZnVuY3Rpb24gaGFuZGxlRWRpdCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgICgwLCBfYXJ0aWNsZS5lZGl0QXJ0aWNsZSkodGhpcy5hcnRpY2xlKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzMi4kbm90aWZ5LnN1Y2Nlc3MoewogICAgICAgICAgdGl0bGU6ICfmiJDlip8nLAogICAgICAgICAgbWVzc2FnZTogJ+S/ruaUueaIkOWKnycKICAgICAgICB9KTsKICAgICAgICBfdGhpczIuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIHBhdGg6ICcvcHJvbW90aW9uL2FydGljbGVMaXN0JwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfZWxlbWVudFVpLk1lc3NhZ2VCb3guYWxlcnQoJ+S4muWKoemUmeivr++8micgKyByZXNwb25zZS5kYXRhLmVycm1zZywgJ+itpuWRiicsIHsKICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICAgIHR5cGU6ICdlcnJvcicKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["_article","require","_storage","_tinymceVue","_interopRequireDefault","_elementUi","_auth","name","components","Editor","data","uploadPath","article","rules","title","required","message","trigger","content","editorInit","language","convert_urls","plugins","toolbar","images_upload_handler","blobInfo","success","failure","formData","FormData","append","blob","createStorage","then","res","url","catch","computed","headers","getToken","created","init","methods","_this","$route","query","id","articleId","detailArticle","response","handleCancel","$router","push","path","handleEdit","_this2","editArticle","$notify","MessageBox","alert","errmsg","confirmButtonText","type"],"sources":["src/views/promotion/articleEdit.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n\n    <el-card class=\"box-card\">\n      <h3>编辑信息公告</h3>\n      <el-form ref=\"article\" :rules=\"rules\" :model=\"article\" label-width=\"150px\">\n        <el-form-item label=\"类型\" prop=\"type\">\n          <el-radio-group v-model=\"article.type\">\n            <el-radio :label=\"'1'\">公告</el-radio>\n            <el-radio :label=\"'0'\">通知</el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item label=\"标题\" prop=\"title\">\n          <el-input v-model=\"article.title\"/>\n        </el-form-item>\n\n        <el-form-item label=\"内容\">\n          <editor :init=\"editorInit\" v-model=\"article.content\"/>\n        </el-form-item>\n\n      </el-form>\n    </el-card>\n\n    <div class=\"op-container\">\n      <el-button @click=\"handleCancel\">取消</el-button>\n      <el-button type=\"primary\" @click=\"handleEdit\">更新</el-button>\n    </div>\n\n  </div>\n</template>\n\n<style>\n.el-card {\n  margin-bottom: 10px;\n}\n.el-tag + .el-tag {\n  margin-left: 10px;\n}\n.input-new-keyword {\n  width: 90px;\n  margin-left: 10px;\n  vertical-align: bottom;\n}\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #20a0ff;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 120px;\n  height: 120px;\n  line-height: 120px;\n  text-align: center;\n}\n.avatar {\n  width: 145px;\n  height: 145px;\n  display: block;\n}\n</style>\n\n<script>\nimport { detailArticle, editArticle } from '@/api/business/article'\nimport { createStorage, uploadPath } from '@/api/business/storage'\nimport Editor from '@tinymce/tinymce-vue'\nimport { MessageBox } from 'element-ui'\nimport { getToken } from '@/utils/auth'\n\nexport default {\n  name: 'ArticleEdit',\n  components: { Editor },\n  data() {\n    return {\n      uploadPath,\n      article: {},\n      rules: {\n        title: [{ required: true, message: '标题不能为空', trigger: 'blur' }],\n        content: [{ required: true, message: '信息内容不能为空', trigger: 'blur' }]\n      },\n      editorInit: {\n        language: 'zh_CN',\n        convert_urls: false,\n        plugins: [\n          'advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools importcss insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount'\n        ],\n        toolbar: [\n          'searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample',\n          'hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen'\n        ],\n        images_upload_handler: function(blobInfo, success, failure) {\n          const formData = new FormData()\n          formData.append('file', blobInfo.blob())\n          createStorage(formData)\n            .then(res => {\n              success(res.data.data.url)\n            })\n            .catch(() => {\n              failure('上传失败，请重新上传')\n            })\n        }\n      }\n    }\n  },\n  computed: {\n    headers() {\n      return {\n        'X-Dts-Admin-Token': getToken()\n      }\n    }\n  },\n  created() {\n    this.init()\n  },\n  methods: {\n    init: function() {\n      if (this.$route.query.id == null) {\n        return\n      }\n      const articleId = this.$route.query.id\n      detailArticle(articleId).then(response => {\n        this.article = response.data.data\n      })\n    },\n    handleCancel: function() {\n      this.$router.push({ path: '/promotion/articleList' })\n    },\n    handleEdit: function() {\n      editArticle(this.article)\n        .then(response => {\n          this.$notify.success({\n            title: '成功',\n            message: '修改成功'\n          })\n          this.$router.push({ path: '/promotion/articleList' })\n        })\n        .catch(response => {\n          MessageBox.alert('业务错误：' + response.data.errmsg, '警告', {\n            confirmButtonText: '确定',\n            type: 'error'\n          })\n        })\n    }\n  }\n}\n</script>\n"],"mappings":";;;;;;;;AAqEA,IAAAA,QAAA,GAAAC,OAAA;AACA,IAAAC,QAAA,GAAAD,OAAA;AACA,IAAAE,WAAA,GAAAC,sBAAA,CAAAH,OAAA;AACA,IAAAI,UAAA,GAAAJ,OAAA;AACA,IAAAK,KAAA,GAAAL,OAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;iCAEA;EACAM,IAAA;EACAC,UAAA;IAAAC,MAAA,EAAAA;EAAA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,UAAA,EAAAA,mBAAA;MACAC,OAAA;MACAC,KAAA;QACAC,KAAA;UAAAC,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;QACAC,OAAA;UAAAH,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MACA;MACAE,UAAA;QACAC,QAAA;QACAC,YAAA;QACAC,OAAA,GACA,gWACA;QACAC,OAAA,GACA,8KACA,qIACA;QACAC,qBAAA,WAAAA,sBAAAC,QAAA,EAAAC,OAAA,EAAAC,OAAA;UACA,IAAAC,QAAA,OAAAC,QAAA;UACAD,QAAA,CAAAE,MAAA,SAAAL,QAAA,CAAAM,IAAA;UACA,IAAAC,sBAAA,EAAAJ,QAAA,EACAK,IAAA,WAAAC,GAAA;YACAR,OAAA,CAAAQ,GAAA,CAAAxB,IAAA,CAAAA,IAAA,CAAAyB,GAAA;UACA,GACAC,KAAA;YACAT,OAAA;UACA;QACA;MACA;IACA;EACA;EACAU,QAAA;IACAC,OAAA,WAAAA,QAAA;MACA;QACA,yBAAAC,cAAA;MACA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAC,IAAA;EACA;EACAC,OAAA;IACAD,IAAA,WAAAA,KAAA;MAAA,IAAAE,KAAA;MACA,SAAAC,MAAA,CAAAC,KAAA,CAAAC,EAAA;QACA;MACA;MACA,IAAAC,SAAA,QAAAH,MAAA,CAAAC,KAAA,CAAAC,EAAA;MACA,IAAAE,sBAAA,EAAAD,SAAA,EAAAd,IAAA,WAAAgB,QAAA;QACAN,KAAA,CAAA/B,OAAA,GAAAqC,QAAA,CAAAvC,IAAA,CAAAA,IAAA;MACA;IACA;IACAwC,YAAA,WAAAA,aAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;QAAAC,IAAA;MAAA;IACA;IACAC,UAAA,WAAAA,WAAA;MAAA,IAAAC,MAAA;MACA,IAAAC,oBAAA,OAAA5C,OAAA,EACAqB,IAAA,WAAAgB,QAAA;QACAM,MAAA,CAAAE,OAAA,CAAA/B,OAAA;UACAZ,KAAA;UACAE,OAAA;QACA;QACAuC,MAAA,CAAAJ,OAAA,CAAAC,IAAA;UAAAC,IAAA;QAAA;MACA,GACAjB,KAAA,WAAAa,QAAA;QACAS,qBAAA,CAAAC,KAAA,WAAAV,QAAA,CAAAvC,IAAA,CAAAkD,MAAA;UACAC,iBAAA;UACAC,IAAA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]}]}