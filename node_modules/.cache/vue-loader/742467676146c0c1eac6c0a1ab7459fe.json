{"remainingRequest":"C:\\dts-shop\\admin-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\dts-shop\\admin-ui\\src\\views\\goods\\create.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\dts-shop\\admin-ui\\src\\views\\goods\\create.vue","mtime":1742834137417},{"path":"C:\\dts-shop\\admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1742308433329},{"path":"C:\\dts-shop\\admin-ui\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1742308433476},{"path":"C:\\dts-shop\\admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1742308433329},{"path":"C:\\dts-shop\\admin-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1742308445120}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGFkZFByb2R1Y3QsIGdldFByb2R1Y3RTZXJpZXMsIGdldFByb2R1Y3RMZXZlbHMgfSBmcm9tICdAL2FwaS9idXNpbmVzcy9nb29kcycKaW1wb3J0IHsgY3JlYXRlU3RvcmFnZSwgdXBsb2FkUGF0aCB9IGZyb20gJ0AvYXBpL2J1c2luZXNzL3N0b3JhZ2UnCmltcG9ydCBFZGl0b3IgZnJvbSAnQHRpbnltY2UvdGlueW1jZS12dWUnCmltcG9ydCB7IE1lc3NhZ2VCb3ggfSBmcm9tICdlbGVtZW50LXVpJwppbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCcKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnR29vZHNDcmVhdGUnLAogIGNvbXBvbmVudHM6IHsgRWRpdG9yIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1cGxvYWRQYXRoLAogICAgICBuZXdLZXl3b3JkVmlzaWJsZTogZmFsc2UsCiAgICAgIG5ld0tleXdvcmQ6ICcnLAogICAgICBrZXl3b3JkczogW10sCiAgICAgIHByb2R1Y3RTZXJpZXNMaXN0OiBbXSwKICAgICAgcHJvZHVjdExldmVsczogW10sCiAgICAgIGdvb2RzOiB7IHBpY1VybDogJycsIGdhbGxlcnk6IFtdIH0sCiAgICAgIHNwZWNWaXNpYWJsZTogZmFsc2UsCiAgICAgIHNwZWNGb3JtOiB7IHNwZWNpZmljYXRpb246ICcnLCB2YWx1ZTogJycsIHBpY1VybDogJycgfSwKICAgICAgbXVsdGlwbGVTcGVjOiBmYWxzZSwKICAgICAgc3BlY2lmaWNhdGlvbnM6IFt7IHNwZWNpZmljYXRpb246ICfop4TmoLwnLCB2YWx1ZTogJ+agh+WHhicsIHBpY1VybDogJycgfV0sCiAgICAgIHByb2R1Y3RWaXNpYWJsZTogZmFsc2UsCiAgICAgIHByb2R1Y3RGb3JtOiB7IGlkOiAwLCBzcGVjaWZpY2F0aW9uczogW10sIHByaWNlOiAwLjAwLCBudW1iZXI6IDAsIHVybDogJycgfSwKICAgICAgcHJvZHVjdHM6IFt7IGlkOiAwLCBzcGVjaWZpY2F0aW9uczogWyfmoIflh4YnXSwgcHJpY2U6IDAuMDAsIG51bWJlcjogMCwgdXJsOiAnJyB9XSwKICAgICAgYXR0cmlidXRlVmlzaWFibGU6IGZhbHNlLAogICAgICBhdHRyaWJ1dGVGb3JtOiB7IGF0dHJpYnV0ZTogJycsIHZhbHVlOiAnJyB9LAogICAgICBhdHRyaWJ1dGVzOiBbXSwKICAgICAgcnVsZXM6IHsKICAgICAgICBnb29kc1NuOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+WVhuWTgee8luWPt+S4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9XSwKICAgICAgICBuYW1lOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+WVhuWTgeWQjeensOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9XQogICAgICB9LAogICAgICBlZGl0b3JJbml0OiB7CiAgICAgICAgbGFuZ3VhZ2U6ICd6aF9DTicsCiAgICAgICAgY29udmVydF91cmxzOiBmYWxzZSwKICAgICAgICBwbHVnaW5zOiBbJ2Fkdmxpc3QgYW5jaG9yIGF1dG9saW5rIGF1dG9zYXZlIGNvZGUgY29kZXNhbXBsZSBjb2xvcnBpY2tlciBjb2xvcnBpY2tlciBjb250ZXh0bWVudSBkaXJlY3Rpb25hbGl0eSBlbW90aWNvbnMgZnVsbHNjcmVlbiBociBpbWFnZSBpbWFnZXRvb2xzIGltcG9ydGNzcyBpbnNlcnRkYXRldGltZSBsaW5rIGxpc3RzIG1lZGlhIG5vbmJyZWFraW5nIG5vbmVkaXRhYmxlIHBhZ2VicmVhayBwYXN0ZSBwcmV2aWV3IHByaW50IHNhdmUgc2VhcmNocmVwbGFjZSBzcGVsbGNoZWNrZXIgdGFiZm9jdXMgdGFibGUgdGVtcGxhdGUgdGV4dGNvbG9yIHRleHRwYXR0ZXJuIHZpc3VhbGJsb2NrcyB2aXN1YWxjaGFycyB3b3JkY291bnQnXSwKICAgICAgICB0b29sYmFyOiBbJ3NlYXJjaHJlcGxhY2UgYm9sZCBpdGFsaWMgdW5kZXJsaW5lIHN0cmlrZXRocm91Z2ggYWxpZ25sZWZ0IGFsaWduY2VudGVyIGFsaWducmlnaHQgb3V0ZGVudCBpbmRlbnQgIGJsb2NrcXVvdGUgdW5kbyByZWRvIHJlbW92ZWZvcm1hdCBzdWJzY3JpcHQgc3VwZXJzY3JpcHQgY29kZSBjb2Rlc2FtcGxlJywgJ2hyIGJ1bGxpc3QgbnVtbGlzdCBsaW5rIGltYWdlIGNoYXJtYXAgcHJldmlldyBhbmNob3IgcGFnZWJyZWFrIGluc2VydGRhdGV0aW1lIG1lZGlhIHRhYmxlIGVtb3RpY29ucyBmb3JlY29sb3IgYmFja2NvbG9yIGZ1bGxzY3JlZW4nXSwKICAgICAgICBpbWFnZXNfdXBsb2FkX2hhbmRsZXI6IGZ1bmN0aW9uKGJsb2JJbmZvLCBzdWNjZXNzLCBmYWlsdXJlKSB7CiAgICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpCiAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCBibG9iSW5mby5ibG9iKCkpCiAgICAgICAgICBjcmVhdGVTdG9yYWdlKGZvcm1EYXRhKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIHN1Y2Nlc3MocmVzLmRhdGEuZGF0YS51cmwpCiAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgIGZhaWx1cmUoJ+S4iuS8oOWksei0pe+8jOivt+mHjeaWsOS4iuS8oCcpCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGhlYWRlcnMoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgJ1gtRHRzLUFkbWluLVRva2VuJzogZ2V0VG9rZW4oKQogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5pbml0KCkKICB9LAoKICBtZXRob2RzOiB7CiAgICBpbml0OiBmdW5jdGlvbigpIHsKICAgICAgZ2V0UHJvZHVjdFNlcmllcygpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMucHJvZHVjdFNlcmllc0xpc3QgPSByZXNwb25zZS5kYXRhLmRhdGEuaXRlbXMKICAgICAgfSkKCiAgICAgICBnZXRQcm9kdWN0TGV2ZWxzKCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5wcm9kdWN0TGV2ZWxzID0gcmVzcG9uc2UuZGF0YS5kYXRhLml0ZW1zCiAgICAgIH0pCgogICAgfSwKIAogICAgaGFuZGxlQ2FuY2VsOiBmdW5jdGlvbigpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiAnL2dvb2RzL2xpc3QnIH0pCiAgICB9LAogICAgaGFuZGxlUHVibGlzaDogZnVuY3Rpb24oKSB7CiAgICAgIGFkZFByb2R1Y3QodGhpcy5nb29kcykudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy4kbm90aWZ5LnN1Y2Nlc3MoewogICAgICAgICAgdGl0bGU6ICfmiJDlip8nLAogICAgICAgICAgbWVzc2FnZTogJ+WIm+W7uuaIkOWKnycKICAgICAgICB9KQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogJy9nb29kcy9saXN0JyB9KQogICAgICB9KS5jYXRjaChyZXNwb25zZSA9PiB7CiAgICAgICAgTWVzc2FnZUJveC5hbGVydCgn5Lia5Yqh6ZSZ6K+v77yaJyArIHJlc3BvbnNlLmRhdGEuZXJybXNnLCAn6K2m5ZGKJywgewogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICAgIH0pCiAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlQ2xvc2UodGFnKSB7CiAgICAgIHRoaXMua2V5d29yZHMuc3BsaWNlKHRoaXMua2V5d29yZHMuaW5kZXhPZih0YWcpLCAxKQogICAgICB0aGlzLmdvb2RzLmtleXdvcmRzID0gdGhpcy5rZXl3b3Jkcy50b1N0cmluZygpCiAgICB9LAogICAgc2hvd0lucHV0KCkgewogICAgICB0aGlzLm5ld0tleXdvcmRWaXNpYmxlID0gdHJ1ZQogICAgICB0aGlzLiRuZXh0VGljayhfID0+IHsKICAgICAgICB0aGlzLiRyZWZzLm5ld0tleXdvcmRJbnB1dC4kcmVmcy5pbnB1dC5mb2N1cygpCiAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlSW5wdXRDb25maXJtKCkgewogICAgICBjb25zdCBuZXdLZXl3b3JkID0gdGhpcy5uZXdLZXl3b3JkCiAgICAgIGlmIChuZXdLZXl3b3JkKSB7CiAgICAgICAgdGhpcy5rZXl3b3Jkcy5wdXNoKG5ld0tleXdvcmQpCiAgICAgICAgdGhpcy5nb29kcy5rZXl3b3JkcyA9IHRoaXMua2V5d29yZHMudG9TdHJpbmcoKQogICAgICB9CiAgICAgIHRoaXMubmV3S2V5d29yZFZpc2libGUgPSBmYWxzZQogICAgICB0aGlzLm5ld0tleXdvcmQgPSAnJwogICAgfSwKICAgIHVwbG9hZFBpY1VybDogZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgdGhpcy5nb29kcy5waWNVcmwgPSByZXNwb25zZS5kYXRhLnVybAogICAgfSwKICAgIHVwbG9hZE92ZXJydW46IGZ1bmN0aW9uKCkgewogICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgICAgIG1lc3NhZ2U6ICfkuIrkvKDmlofku7bkuKrmlbDotoXlh7rpmZDliLYh5pyA5aSa5LiK5LygNeW8oOWbvueJhyEnCiAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlR2FsbGVyeVVybChyZXNwb25zZSwgZmlsZSwgZmlsZUxpc3QpIHsKICAgICAgaWYgKHJlc3BvbnNlLmVycm5vID09PSAwKSB7CiAgICAgICAgdGhpcy5nb29kcy5nYWxsZXJ5LnB1c2gocmVzcG9uc2UuZGF0YS51cmwpCiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVSZW1vdmU6IGZ1bmN0aW9uKGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5nb29kcy5nYWxsZXJ5Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgLy8g6L+Z6YeM5a2Y5Zyo5Lik56eN5oOF5Ya1CiAgICAgICAgLy8gMS4g5aaC5p6c5omA5Yig6Zmk5Zu+54mH5piv5Yia5Yia5LiK5Lyg55qE5Zu+54mH77yM6YKj5LmI5Zu+54mH5Zyw5Z2A5pivZmlsZS5yZXNwb25zZS5kYXRhLnVybAogICAgICAgIC8vICAgIOatpOaXtueahGZpbGUudXJs6Jm954S25a2Y5Zyo77yM5L2G5piv5piv5pys5py65Zyw5Z2A77yM6ICM5LiN5piv6L+c56iL5Zyw5Z2A44CCCiAgICAgICAgLy8gMi4g5aaC5p6c5omA5Yig6Zmk5Zu+54mH5piv5ZCO5Y+w6L+U5Zue55qE5bey5pyJ5Zu+54mH77yM6YKj5LmI5Zu+54mH5Zyw5Z2A5pivZmlsZS51cmwKICAgICAgICB2YXIgdXJsCiAgICAgICAgaWYgKGZpbGUucmVzcG9uc2UgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgdXJsID0gZmlsZS51cmwKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdXJsID0gZmlsZS5yZXNwb25zZS5kYXRhLnVybAogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMuZ29vZHMuZ2FsbGVyeVtpXSA9PT0gdXJsKSB7CiAgICAgICAgICB0aGlzLmdvb2RzLmdhbGxlcnkuc3BsaWNlKGksIDEpCiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgc3BlY0NoYW5nZWQ6IGZ1bmN0aW9uKGxhYmVsKSB7CiAgICAgIGlmIChsYWJlbCA9PT0gZmFsc2UpIHsKICAgICAgICB0aGlzLnNwZWNpZmljYXRpb25zID0gW3sgc3BlY2lmaWNhdGlvbjogJ+inhOagvCcsIHZhbHVlOiAn5qCH5YeGJywgcGljVXJsOiAnJyB9XQogICAgICAgIHRoaXMucHJvZHVjdHMgPSBbeyBpZDogMCwgc3BlY2lmaWNhdGlvbnM6IFsn5qCH5YeGJ10sIHByaWNlOiAwLjAwLCBudW1iZXI6IDAsIHVybDogJycgfV0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNwZWNpZmljYXRpb25zID0gW10KICAgICAgICB0aGlzLnByb2R1Y3RzID0gW10KICAgICAgfQogICAgfSwKICAgIHVwbG9hZFNwZWNQaWNVcmw6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgIHRoaXMuc3BlY0Zvcm0ucGljVXJsID0gcmVzcG9uc2UuZGF0YS51cmwKICAgIH0sCiAgICBoYW5kbGVTcGVjaWZpY2F0aW9uU2hvdygpIHsKICAgICAgdGhpcy5zcGVjRm9ybSA9IHsgc3BlY2lmaWNhdGlvbjogJycsIHZhbHVlOiAnJywgcGljVXJsOiAnJyB9CiAgICAgIHRoaXMuc3BlY1Zpc2lhYmxlID0gdHJ1ZQogICAgfSwKICAgIGhhbmRsZVNwZWNpZmljYXRpb25BZGQoKSB7CiAgICAgIHZhciBpbmRleCA9IHRoaXMuc3BlY2lmaWNhdGlvbnMubGVuZ3RoIC0gMQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3BlY2lmaWNhdGlvbnMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCB2ID0gdGhpcy5zcGVjaWZpY2F0aW9uc1tpXQogICAgICAgIGlmICh2LnNwZWNpZmljYXRpb24gPT09IHRoaXMuc3BlY0Zvcm0uc3BlY2lmaWNhdGlvbikgewogICAgICAgICAgaW5kZXggPSBpCiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLnNwZWNpZmljYXRpb25zLnNwbGljZShpbmRleCArIDEsIDAsIHRoaXMuc3BlY0Zvcm0pCiAgICAgIHRoaXMuc3BlY1Zpc2lhYmxlID0gZmFsc2UKCiAgICAgIHRoaXMuc3BlY1RvUHJvZHVjdCgpCiAgICB9LAogICAgaGFuZGxlU3BlY2lmaWNhdGlvbkRlbGV0ZShyb3cpIHsKICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnNwZWNpZmljYXRpb25zLmluZGV4T2Yocm93KQogICAgICB0aGlzLnNwZWNpZmljYXRpb25zLnNwbGljZShpbmRleCwgMSkKICAgICAgdGhpcy5zcGVjVG9Qcm9kdWN0KCkKICAgIH0sCiAgICBzcGVjVG9Qcm9kdWN0KCkgewogICAgICBpZiAodGhpcy5zcGVjaWZpY2F0aW9ucy5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICAvLyDmoLnmja5zcGVjaWZpY2F0aW9uc+WIm+W7uuS4tOaXtuinhOagvOWIl+ihqAogICAgICB2YXIgc3BlY1ZhbHVlcyA9IFtdCiAgICAgIHZhciBzcGVjID0gdGhpcy5zcGVjaWZpY2F0aW9uc1swXS5zcGVjaWZpY2F0aW9uCiAgICAgIHZhciB2YWx1ZXMgPSBbXQogICAgICB2YWx1ZXMucHVzaCgwKQoKICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCB0aGlzLnNwZWNpZmljYXRpb25zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgYXNwZWMgPSB0aGlzLnNwZWNpZmljYXRpb25zW2ldLnNwZWNpZmljYXRpb24KCiAgICAgICAgaWYgKGFzcGVjID09PSBzcGVjKSB7CiAgICAgICAgICB2YWx1ZXMucHVzaChpKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzcGVjVmFsdWVzLnB1c2godmFsdWVzKQogICAgICAgICAgc3BlYyA9IGFzcGVjCiAgICAgICAgICB2YWx1ZXMgPSBbXQogICAgICAgICAgdmFsdWVzLnB1c2goaSkKICAgICAgICB9CiAgICAgIH0KICAgICAgc3BlY1ZhbHVlcy5wdXNoKHZhbHVlcykKCiAgICAgIC8vIOagueaNruS4tOaXtuinhOagvOWIl+ihqOeUn+S6p+i0p+WTgeinhOagvAogICAgICAvLyDnrpfms5Xln7rkuo4gaHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3R5aGpfc2YvYXJ0aWNsZS9kZXRhaWxzLzUzODkzMTI1CiAgICAgIHZhciBwcm9kdWN0c0luZGV4ID0gMAogICAgICB2YXIgcHJvZHVjdHMgPSBbXQogICAgICB2YXIgY29tYmluYXRpb24gPSBbXQogICAgICB2YXIgbiA9IHNwZWNWYWx1ZXMubGVuZ3RoCiAgICAgIGZvciAodmFyIHMgPSAwOyBzIDwgbjsgcysrKSB7CiAgICAgICAgY29tYmluYXRpb25bc10gPSAwCiAgICAgIH0KICAgICAgdmFyIGluZGV4ID0gMAogICAgICB2YXIgaXNDb250aW51ZSA9IGZhbHNlCiAgICAgIGRvIHsKICAgICAgICB2YXIgc3BlY2lmaWNhdGlvbnMgPSBbXQogICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgbjsgeCsrKSB7CiAgICAgICAgICB2YXIgeiA9IHNwZWNWYWx1ZXNbeF1bY29tYmluYXRpb25beF1dCiAgICAgICAgICBzcGVjaWZpY2F0aW9ucy5wdXNoKHRoaXMuc3BlY2lmaWNhdGlvbnNbel0udmFsdWUpCiAgICAgICAgfQogICAgICAgIHByb2R1Y3RzW3Byb2R1Y3RzSW5kZXhdID0geyBpZDogcHJvZHVjdHNJbmRleCwgc3BlY2lmaWNhdGlvbnM6IHNwZWNpZmljYXRpb25zLCBwcmljZTogMC4wMCwgbnVtYmVyOiAwLCB1cmw6ICcnIH0KICAgICAgICBwcm9kdWN0c0luZGV4KysKCiAgICAgICAgaW5kZXgrKwogICAgICAgIGNvbWJpbmF0aW9uW24gLSAxXSA9IGluZGV4CiAgICAgICAgZm9yICh2YXIgaiA9IG4gLSAxOyBqID49IDA7IGotLSkgewogICAgICAgICAgaWYgKGNvbWJpbmF0aW9uW2pdID49IHNwZWNWYWx1ZXNbal0ubGVuZ3RoKSB7CiAgICAgICAgICAgIGNvbWJpbmF0aW9uW2pdID0gMAogICAgICAgICAgICBpbmRleCA9IDAKICAgICAgICAgICAgaWYgKGogLSAxID49IDApIHsKICAgICAgICAgICAgICBjb21iaW5hdGlvbltqIC0gMV0gPSBjb21iaW5hdGlvbltqIC0gMV0gKyAxCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaXNDb250aW51ZSA9IGZhbHNlCiAgICAgICAgZm9yICh2YXIgcCA9IDA7IHAgPCBuOyBwKyspIHsKICAgICAgICAgIGlmIChjb21iaW5hdGlvbltwXSAhPT0gMCkgewogICAgICAgICAgICBpc0NvbnRpbnVlID0gdHJ1ZQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSB3aGlsZSAoaXNDb250aW51ZSkKCiAgICAgIHRoaXMucHJvZHVjdHMgPSBwcm9kdWN0cwogICAgfSwKICAgIGhhbmRsZVByb2R1Y3RTaG93KHJvdykgewogICAgICB0aGlzLnByb2R1Y3RGb3JtID0gT2JqZWN0LmFzc2lnbih7fSwgcm93KQogICAgICB0aGlzLnByb2R1Y3RWaXNpYWJsZSA9IHRydWUKICAgIH0sCiAgICB1cGxvYWRQcm9kdWN0VXJsOiBmdW5jdGlvbihyZXNwb25zZSkgewogICAgICB0aGlzLnByb2R1Y3RGb3JtLnVybCA9IHJlc3BvbnNlLmRhdGEudXJsCiAgICB9LAogICAgaGFuZGxlUHJvZHVjdEVkaXQoKSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wcm9kdWN0cy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IHYgPSB0aGlzLnByb2R1Y3RzW2ldCiAgICAgICAgaWYgKHYuaWQgPT09IHRoaXMucHJvZHVjdEZvcm0uaWQpIHsKICAgICAgICAgIHRoaXMucHJvZHVjdHMuc3BsaWNlKGksIDEsIHRoaXMucHJvZHVjdEZvcm0pCiAgICAgICAgICBicmVhawogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLnByb2R1Y3RWaXNpYWJsZSA9IGZhbHNlCiAgICB9LAogICAgaGFuZGxlQXR0cmlidXRlU2hvdygpIHsKICAgICAgdGhpcy5hdHRyaWJ1dGVGb3JtID0ge30KICAgICAgdGhpcy5hdHRyaWJ1dGVWaXNpYWJsZSA9IHRydWUKICAgIH0sCiAgICBoYW5kbGVBdHRyaWJ1dGVBZGQoKSB7CiAgICAgIHRoaXMuYXR0cmlidXRlcy51bnNoaWZ0KHRoaXMuYXR0cmlidXRlRm9ybSkKICAgICAgdGhpcy5hdHRyaWJ1dGVWaXNpYWJsZSA9IGZhbHNlCiAgICB9LAogICAgaGFuZGxlQXR0cmlidXRlRGVsZXRlKHJvdykgewogICAgICBjb25zdCBpbmRleCA9IHRoaXMuYXR0cmlidXRlcy5pbmRleE9mKHJvdykKICAgICAgdGhpcy5hdHRyaWJ1dGVzLnNwbGljZShpbmRleCwgMSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["create.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"create.vue","sourceRoot":"src/views/goods","sourcesContent":["<template>\n  <div class=\"app-container\">\n\n    <el-card class=\"box-card\">\n      <h3>商品维护</h3>\n      <el-form ref=\"goods\" :rules=\"rules\" :model=\"goods\" label-width=\"150px\">\n\n        <el-form-item label=\"商品名称\" prop=\"productName\">\n          <el-input v-model=\"goods.productName\"/>\n        </el-form-item>\n      \n        <el-form-item label=\"参考价格\" prop=\"productPrice\">\n          <el-input v-model=\"goods.productPrice\" placeholder=\"0.00\">\n            <template slot=\"append\">元</template>\n          </el-input>\n        </el-form-item>\n       \n        <el-form-item label=\"商品图片\">\n          <el-upload\n            :action=\"uploadPath\"\n            :show-file-list=\"false\"\n            :headers=\"headers\"\n            :on-success=\"uploadPicUrl\"\n            class=\"avatar-uploader\"\n            accept=\".jpg,.jpeg,.png,.gif\">\n            <img v-if=\"goods.productImage\" :src=\"goods.productImage\" class=\"avatar\">\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"/>\n          </el-upload>\n        </el-form-item>\n\n\n        <el-form-item label=\"商品等级\">\n          <el-select v-model=\"goods.productLevelId\">\n            <el-option v-for=\"item in productLevels\" :key=\"item.levelId\" :label=\"item.levelName\" :value=\"item.levelId\"/>\n          </el-select>\n        </el-form-item>\n\n\n         <el-form-item label=\"所属系列\">\n          <el-select v-model=\"goods.productSeriesId\">\n            <el-option v-for=\"item in productSeriesList\" :key=\"item.seriesId\" :label=\"item.seriesName\" :value=\"item.seriesId\"/>\n          </el-select>\n        </el-form-item>\n\n        <el-form-item label=\"商品简介\">\n          <el-input v-model=\"goods.brief\"/>\n        </el-form-item>\n\n      </el-form>\n    </el-card>\n\n    <div class=\"op-container\">\n      <el-button @click=\"handleCancel\">取消</el-button>\n      <el-button type=\"primary\" @click=\"handlePublish\">上架</el-button>\n    </div>\n\n  </div>\n</template>\n\n<style>\n  .el-card {\n    margin-bottom: 10px;\n  }\n\n  .el-tag + .el-tag {\n    margin-left: 10px;\n  }\n\n  .input-new-keyword {\n    width: 90px;\n    margin-left: 10px;\n    vertical-align: bottom;\n  }\n\n  .avatar-uploader .el-upload {\n    width: 145px;\n    height: 145px;\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n  }\n\n  .avatar-uploader .el-upload:hover {\n    border-color: #20a0ff;\n  }\n\n  .avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 120px;\n    height: 120px;\n    line-height: 120px;\n    text-align: center;\n  }\n\n  .avatar {\n    width: 145px;\n    height: 145px;\n    display: block;\n  }\n</style>\n\n<script>\nimport { addProduct, getProductSeries, getProductLevels } from '@/api/business/goods'\nimport { createStorage, uploadPath } from '@/api/business/storage'\nimport Editor from '@tinymce/tinymce-vue'\nimport { MessageBox } from 'element-ui'\nimport { getToken } from '@/utils/auth'\n\nexport default {\n  name: 'GoodsCreate',\n  components: { Editor },\n\n  data() {\n    return {\n      uploadPath,\n      newKeywordVisible: false,\n      newKeyword: '',\n      keywords: [],\n      productSeriesList: [],\n      productLevels: [],\n      goods: { picUrl: '', gallery: [] },\n      specVisiable: false,\n      specForm: { specification: '', value: '', picUrl: '' },\n      multipleSpec: false,\n      specifications: [{ specification: '规格', value: '标准', picUrl: '' }],\n      productVisiable: false,\n      productForm: { id: 0, specifications: [], price: 0.00, number: 0, url: '' },\n      products: [{ id: 0, specifications: ['标准'], price: 0.00, number: 0, url: '' }],\n      attributeVisiable: false,\n      attributeForm: { attribute: '', value: '' },\n      attributes: [],\n      rules: {\n        goodsSn: [{ required: true, message: '商品编号不能为空', trigger: 'blur' }],\n        name: [{ required: true, message: '商品名称不能为空', trigger: 'blur' }]\n      },\n      editorInit: {\n        language: 'zh_CN',\n        convert_urls: false,\n        plugins: ['advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools importcss insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount'],\n        toolbar: ['searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample', 'hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen'],\n        images_upload_handler: function(blobInfo, success, failure) {\n          const formData = new FormData()\n          formData.append('file', blobInfo.blob())\n          createStorage(formData).then(res => {\n            success(res.data.data.url)\n          }).catch(() => {\n            failure('上传失败，请重新上传')\n          })\n        }\n      }\n    }\n  },\n  computed: {\n    headers() {\n      return {\n        'X-Dts-Admin-Token': getToken()\n      }\n    }\n  },\n  created() {\n    this.init()\n  },\n\n  methods: {\n    init: function() {\n      getProductSeries().then(response => {\n        this.productSeriesList = response.data.data.items\n      })\n\n       getProductLevels().then(response => {\n        this.productLevels = response.data.data.items\n      })\n\n    },\n \n    handleCancel: function() {\n      this.$router.push({ path: '/goods/list' })\n    },\n    handlePublish: function() {\n      addProduct(this.goods).then(response => {\n        this.$notify.success({\n          title: '成功',\n          message: '创建成功'\n        })\n        this.$router.push({ path: '/goods/list' })\n      }).catch(response => {\n        MessageBox.alert('业务错误：' + response.data.errmsg, '警告', {\n          confirmButtonText: '确定',\n          type: 'error'\n        })\n      })\n    },\n    handleClose(tag) {\n      this.keywords.splice(this.keywords.indexOf(tag), 1)\n      this.goods.keywords = this.keywords.toString()\n    },\n    showInput() {\n      this.newKeywordVisible = true\n      this.$nextTick(_ => {\n        this.$refs.newKeywordInput.$refs.input.focus()\n      })\n    },\n    handleInputConfirm() {\n      const newKeyword = this.newKeyword\n      if (newKeyword) {\n        this.keywords.push(newKeyword)\n        this.goods.keywords = this.keywords.toString()\n      }\n      this.newKeywordVisible = false\n      this.newKeyword = ''\n    },\n    uploadPicUrl: function(response) {\n      this.goods.picUrl = response.data.url\n    },\n    uploadOverrun: function() {\n      this.$message({\n        type: 'error',\n        message: '上传文件个数超出限制!最多上传5张图片!'\n      })\n    },\n    handleGalleryUrl(response, file, fileList) {\n      if (response.errno === 0) {\n        this.goods.gallery.push(response.data.url)\n      }\n    },\n    handleRemove: function(file, fileList) {\n      for (var i = 0; i < this.goods.gallery.length; i++) {\n        // 这里存在两种情况\n        // 1. 如果所删除图片是刚刚上传的图片，那么图片地址是file.response.data.url\n        //    此时的file.url虽然存在，但是是本机地址，而不是远程地址。\n        // 2. 如果所删除图片是后台返回的已有图片，那么图片地址是file.url\n        var url\n        if (file.response === undefined) {\n          url = file.url\n        } else {\n          url = file.response.data.url\n        }\n\n        if (this.goods.gallery[i] === url) {\n          this.goods.gallery.splice(i, 1)\n        }\n      }\n    },\n    specChanged: function(label) {\n      if (label === false) {\n        this.specifications = [{ specification: '规格', value: '标准', picUrl: '' }]\n        this.products = [{ id: 0, specifications: ['标准'], price: 0.00, number: 0, url: '' }]\n      } else {\n        this.specifications = []\n        this.products = []\n      }\n    },\n    uploadSpecPicUrl: function(response) {\n      this.specForm.picUrl = response.data.url\n    },\n    handleSpecificationShow() {\n      this.specForm = { specification: '', value: '', picUrl: '' }\n      this.specVisiable = true\n    },\n    handleSpecificationAdd() {\n      var index = this.specifications.length - 1\n      for (var i = 0; i < this.specifications.length; i++) {\n        const v = this.specifications[i]\n        if (v.specification === this.specForm.specification) {\n          index = i\n        }\n      }\n\n      this.specifications.splice(index + 1, 0, this.specForm)\n      this.specVisiable = false\n\n      this.specToProduct()\n    },\n    handleSpecificationDelete(row) {\n      const index = this.specifications.indexOf(row)\n      this.specifications.splice(index, 1)\n      this.specToProduct()\n    },\n    specToProduct() {\n      if (this.specifications.length === 0) {\n        return\n      }\n      // 根据specifications创建临时规格列表\n      var specValues = []\n      var spec = this.specifications[0].specification\n      var values = []\n      values.push(0)\n\n      for (var i = 1; i < this.specifications.length; i++) {\n        const aspec = this.specifications[i].specification\n\n        if (aspec === spec) {\n          values.push(i)\n        } else {\n          specValues.push(values)\n          spec = aspec\n          values = []\n          values.push(i)\n        }\n      }\n      specValues.push(values)\n\n      // 根据临时规格列表生产货品规格\n      // 算法基于 https://blog.csdn.net/tyhj_sf/article/details/53893125\n      var productsIndex = 0\n      var products = []\n      var combination = []\n      var n = specValues.length\n      for (var s = 0; s < n; s++) {\n        combination[s] = 0\n      }\n      var index = 0\n      var isContinue = false\n      do {\n        var specifications = []\n        for (var x = 0; x < n; x++) {\n          var z = specValues[x][combination[x]]\n          specifications.push(this.specifications[z].value)\n        }\n        products[productsIndex] = { id: productsIndex, specifications: specifications, price: 0.00, number: 0, url: '' }\n        productsIndex++\n\n        index++\n        combination[n - 1] = index\n        for (var j = n - 1; j >= 0; j--) {\n          if (combination[j] >= specValues[j].length) {\n            combination[j] = 0\n            index = 0\n            if (j - 1 >= 0) {\n              combination[j - 1] = combination[j - 1] + 1\n            }\n          }\n        }\n        isContinue = false\n        for (var p = 0; p < n; p++) {\n          if (combination[p] !== 0) {\n            isContinue = true\n          }\n        }\n      } while (isContinue)\n\n      this.products = products\n    },\n    handleProductShow(row) {\n      this.productForm = Object.assign({}, row)\n      this.productVisiable = true\n    },\n    uploadProductUrl: function(response) {\n      this.productForm.url = response.data.url\n    },\n    handleProductEdit() {\n      for (var i = 0; i < this.products.length; i++) {\n        const v = this.products[i]\n        if (v.id === this.productForm.id) {\n          this.products.splice(i, 1, this.productForm)\n          break\n        }\n      }\n      this.productVisiable = false\n    },\n    handleAttributeShow() {\n      this.attributeForm = {}\n      this.attributeVisiable = true\n    },\n    handleAttributeAdd() {\n      this.attributes.unshift(this.attributeForm)\n      this.attributeVisiable = false\n    },\n    handleAttributeDelete(row) {\n      const index = this.attributes.indexOf(row)\n      this.attributes.splice(index, 1)\n    }\n  }\n}\n</script>\n"]}]}