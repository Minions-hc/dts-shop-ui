{"remainingRequest":"C:\\dts-shop\\admin-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\dts-shop\\admin-ui\\src\\views\\goods\\edit.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\dts-shop\\admin-ui\\src\\views\\goods\\edit.vue","mtime":1742834654702},{"path":"C:\\dts-shop\\admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1742308433329},{"path":"C:\\dts-shop\\admin-ui\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1742308433476},{"path":"C:\\dts-shop\\admin-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1742308433329},{"path":"C:\\dts-shop\\admin-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1742308445120}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldFByb2R1Y3RCeUlkLCBnZXRQcm9kdWN0TGV2ZWxzLCBnZXRQcm9kdWN0U2VyaWVzLCBnZXRQcm9kdWN0TGlzdCwgdXBkYXRlUHJvZHVjdCB9IGZyb20gJ0AvYXBpL2J1c2luZXNzL2dvb2RzJwppbXBvcnQgeyBjcmVhdGVTdG9yYWdlLCB1cGxvYWRQYXRoIH0gZnJvbSAnQC9hcGkvYnVzaW5lc3Mvc3RvcmFnZScKCmltcG9ydCB7IE1lc3NhZ2VCb3ggfSBmcm9tICdlbGVtZW50LXVpJwppbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCcKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnR29vZHNFZGl0JywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXBsb2FkUGF0aCwKICAgICAgbmV3S2V5d29yZFZpc2libGU6IGZhbHNlLAogICAgICBuZXdLZXl3b3JkOiAnJywKICAgICAga2V5d29yZHM6IFtdLAogICAgICBnYWxsZXJ5RmlsZUxpc3Q6IFtdLAogICAgICBjYXRlZ29yeUxpc3Q6IFtdLAogICAgICBicmFuZExpc3Q6IFtdLAogICAgICBjYXRlZ29yeUlkczogW10sCiAgICAgIGdvb2RzOiB7IGdhbGxlcnk6IFtdIH0sCiAgICAgIHByb2R1Y3RTZXJpZXNMaXN0OiBbXSwKICAgICAgcHJvZHVjdExldmVsczogW10sCiAgICAgIHNwZWNWaXNpYWJsZTogZmFsc2UsCiAgICAgIHNwZWNGb3JtOiB7IHNwZWNpZmljYXRpb246ICcnLCB2YWx1ZTogJycsIHBpY1VybDogJycgfSwKICAgICAgc3BlY2lmaWNhdGlvbnM6IFt7IHNwZWNpZmljYXRpb246ICfop4TmoLwnLCB2YWx1ZTogJ+agh+WHhicsIHBpY1VybDogJycgfV0sCiAgICAgIHByb2R1Y3RWaXNpYWJsZTogZmFsc2UsCiAgICAgIHByb2R1Y3RGb3JtOiB7CiAgICAgICAgaWQ6IDAsCiAgICAgICAgc3BlY2lmaWNhdGlvbnM6IFtdLAogICAgICAgIHByaWNlOiAwLjAsCiAgICAgICAgbnVtYmVyOiAwLAogICAgICAgIHVybDogJycKICAgICAgfSwKICAgICAgYXR0cmlidXRlVmlzaWFibGU6IGZhbHNlLAogICAgICBhdHRyaWJ1dGVGb3JtOiB7IGF0dHJpYnV0ZTogJycsIHZhbHVlOiAnJyB9LAogICAgICBhdHRyaWJ1dGVzOiBbXSwKICAgICAgcnVsZXM6IHsKICAgICAgICBnb29kc1NuOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn5ZWG5ZOB57yW5Y+35LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdLAogICAgICAgIG5hbWU6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn5ZWG5ZOB5ZCN56ew5LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH1dCiAgICAgIH0sCiAgICAgIGVkaXRvckluaXQ6IHsKICAgICAgICBsYW5ndWFnZTogJ3poX0NOJywKICAgICAgICBjb252ZXJ0X3VybHM6IGZhbHNlLAogICAgICAgIHBsdWdpbnM6IFsKICAgICAgICAgICdhZHZsaXN0IGFuY2hvciBhdXRvbGluayBhdXRvc2F2ZSBjb2RlIGNvZGVzYW1wbGUgY29sb3JwaWNrZXIgY29sb3JwaWNrZXIgY29udGV4dG1lbnUgZGlyZWN0aW9uYWxpdHkgZW1vdGljb25zIGZ1bGxzY3JlZW4gaHIgaW1hZ2UgaW1hZ2V0b29scyBpbXBvcnRjc3MgaW5zZXJ0ZGF0ZXRpbWUgbGluayBsaXN0cyBtZWRpYSBub25icmVha2luZyBub25lZGl0YWJsZSBwYWdlYnJlYWsgcGFzdGUgcHJldmlldyBwcmludCBzYXZlIHNlYXJjaHJlcGxhY2Ugc3BlbGxjaGVja2VyIHRhYmZvY3VzIHRhYmxlIHRlbXBsYXRlIHRleHRjb2xvciB0ZXh0cGF0dGVybiB2aXN1YWxibG9ja3MgdmlzdWFsY2hhcnMgd29yZGNvdW50JwogICAgICAgIF0sCiAgICAgICAgdG9vbGJhcjogWwogICAgICAgICAgJ3NlYXJjaHJlcGxhY2UgYm9sZCBpdGFsaWMgdW5kZXJsaW5lIHN0cmlrZXRocm91Z2ggYWxpZ25sZWZ0IGFsaWduY2VudGVyIGFsaWducmlnaHQgb3V0ZGVudCBpbmRlbnQgIGJsb2NrcXVvdGUgdW5kbyByZWRvIHJlbW92ZWZvcm1hdCBzdWJzY3JpcHQgc3VwZXJzY3JpcHQgY29kZSBjb2Rlc2FtcGxlJywKICAgICAgICAgICdociBidWxsaXN0IG51bWxpc3QgbGluayBpbWFnZSBjaGFybWFwIHByZXZpZXcgYW5jaG9yIHBhZ2VicmVhayBpbnNlcnRkYXRldGltZSBtZWRpYSB0YWJsZSBlbW90aWNvbnMgZm9yZWNvbG9yIGJhY2tjb2xvciBmdWxsc2NyZWVuJwogICAgICAgIF0sCiAgICAgICAgaW1hZ2VzX3VwbG9hZF9oYW5kbGVyOiBmdW5jdGlvbihibG9iSW5mbywgc3VjY2VzcywgZmFpbHVyZSkgewogICAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKQogICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgYmxvYkluZm8uYmxvYigpKQogICAgICAgICAgY3JlYXRlU3RvcmFnZShmb3JtRGF0YSkKICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICBzdWNjZXNzKHJlcy5kYXRhLmRhdGEudXJsKQogICAgICAgICAgICB9KQogICAgICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgICAgIGZhaWx1cmUoJ+S4iuS8oOWksei0pe+8jOivt+mHjeaWsOS4iuS8oCcpCiAgICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgaGVhZGVycygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICAnWC1EdHMtQWRtaW4tVG9rZW4nOiBnZXRUb2tlbigpCiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmluaXQoKQogIH0sCiAgbWV0aG9kczogewogICAgaW5pdDogZnVuY3Rpb24oKSB7CiAgICAgIGNvbnN0IHByb2R1Y3RJZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnByb2R1Y3RJZAogICAgICBpZiAocHJvZHVjdElkID09IG51bGwpIHsKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICBnZXRQcm9kdWN0QnlJZCh7InByb2R1Y3RJZCIgOiBwcm9kdWN0SWR9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLmdvb2RzID0gcmVzcG9uc2UuZGF0YS5kYXRhCiAgICAgIH0pCgogICAgICBnZXRQcm9kdWN0U2VyaWVzKCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5wcm9kdWN0U2VyaWVzTGlzdCA9IHJlc3BvbnNlLmRhdGEuZGF0YS5pdGVtcwogICAgICB9KQoKICAgICAgZ2V0UHJvZHVjdExldmVscygpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMucHJvZHVjdExldmVscyA9IHJlc3BvbnNlLmRhdGEuZGF0YS5pdGVtcwogICAgICB9KQogICAgfSwKICAgIGhhbmRsZUNhdGVnb3J5Q2hhbmdlKHZhbHVlKSB7CiAgICAgIHRoaXMuZ29vZHMuY2F0ZWdvcnlJZCA9IHZhbHVlW3ZhbHVlLmxlbmd0aCAtIDFdCiAgICB9LAogICAgaGFuZGxlQ2FuY2VsOiBmdW5jdGlvbigpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiAnL2dvb2RzL2xpc3QnIH0pCiAgICB9LAogICAgaGFuZGxlRWRpdDogZnVuY3Rpb24oKSB7CiAgICAgIHVwZGF0ZVByb2R1Y3QodGhpcy5nb29kcykKICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICB0aGlzLiRub3RpZnkuc3VjY2Vzcyh7CiAgICAgICAgICAgIHRpdGxlOiAn5oiQ5YqfJywKICAgICAgICAgICAgbWVzc2FnZTogJ+WIm+W7uuaIkOWKnycKICAgICAgICAgIH0pCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICcvZ29vZHMvbGlzdCcgfSkKICAgICAgICB9KQogICAgICAgIC5jYXRjaChyZXNwb25zZSA9PiB7CiAgICAgICAgICBNZXNzYWdlQm94LmFsZXJ0KCfkuJrliqHplJnor6/vvJonICsgcmVzcG9uc2UuZGF0YS5lcnJtc2csICforablkYonLCB7CiAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICAgICAgfSkKICAgICAgICB9KQogICAgfSwKICAgIGhhbmRsZUNsb3NlKHRhZykgewogICAgICB0aGlzLmtleXdvcmRzLnNwbGljZSh0aGlzLmtleXdvcmRzLmluZGV4T2YodGFnKSwgMSkKICAgICAgdGhpcy5nb29kcy5rZXl3b3JkcyA9IHRoaXMua2V5d29yZHMudG9TdHJpbmcoKQogICAgfSwKICAgIHNob3dJbnB1dCgpIHsKICAgICAgdGhpcy5uZXdLZXl3b3JkVmlzaWJsZSA9IHRydWUKICAgICAgdGhpcy4kbmV4dFRpY2soXyA9PiB7CiAgICAgICAgdGhpcy4kcmVmcy5uZXdLZXl3b3JkSW5wdXQuJHJlZnMuaW5wdXQuZm9jdXMoKQogICAgICB9KQogICAgfSwKICAgIGhhbmRsZUlucHV0Q29uZmlybSgpIHsKICAgICAgY29uc3QgbmV3S2V5d29yZCA9IHRoaXMubmV3S2V5d29yZAogICAgICBpZiAobmV3S2V5d29yZCkgewogICAgICAgIHRoaXMua2V5d29yZHMucHVzaChuZXdLZXl3b3JkKQogICAgICAgIHRoaXMuZ29vZHMua2V5d29yZHMgPSB0aGlzLmtleXdvcmRzLnRvU3RyaW5nKCkKICAgICAgfQogICAgICB0aGlzLm5ld0tleXdvcmRWaXNpYmxlID0gZmFsc2UKICAgICAgdGhpcy5uZXdLZXl3b3JkID0gJycKICAgIH0sCiAgICB1cGxvYWRQaWNVcmw6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgIHRoaXMuZ29vZHMucGljVXJsID0gcmVzcG9uc2UuZGF0YS51cmwKICAgIH0sCiAgICB1cGxvYWRPdmVycnVuOiBmdW5jdGlvbigpIHsKICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICBtZXNzYWdlOiAn5LiK5Lyg5paH5Lu25Liq5pWw6LaF5Ye66ZmQ5Yi2IeacgOWkmuS4iuS8oDXlvKDlm77niYchJwogICAgICB9KQogICAgfSwKICAgIGhhbmRsZUdhbGxlcnlVcmwocmVzcG9uc2UsIGZpbGUsIGZpbGVMaXN0KSB7CiAgICAgIGlmIChyZXNwb25zZS5lcnJubyA9PT0gMCkgewogICAgICAgIHRoaXMuZ29vZHMuZ2FsbGVyeS5wdXNoKHJlc3BvbnNlLmRhdGEudXJsKQogICAgICB9CiAgICB9LAogICAgaGFuZGxlUmVtb3ZlOiBmdW5jdGlvbihmaWxlLCBmaWxlTGlzdCkgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZ29vZHMuZ2FsbGVyeS5sZW5ndGg7IGkrKykgewogICAgICAgIC8vIOi/memHjOWtmOWcqOS4pOenjeaDheWGtQogICAgICAgIC8vIDEuIOWmguaenOaJgOWIoOmZpOWbvueJh+aYr+WImuWImuS4iuS8oOeahOWbvueJh++8jOmCo+S5iOWbvueJh+WcsOWdgOaYr2ZpbGUucmVzcG9uc2UuZGF0YS51cmwKICAgICAgICAvLyAgICDmraTml7bnmoRmaWxlLnVybOiZveeEtuWtmOWcqO+8jOS9huaYr+aYr+acrOacuuWcsOWdgO+8jOiAjOS4jeaYr+i/nOeoi+WcsOWdgOOAggogICAgICAgIC8vIDIuIOWmguaenOaJgOWIoOmZpOWbvueJh+aYr+WQjuWPsOi/lOWbnueahOW3suacieWbvueJh++8jOmCo+S5iOWbvueJh+WcsOWdgOaYr2ZpbGUudXJsCiAgICAgICAgdmFyIHVybAogICAgICAgIGlmIChmaWxlLnJlc3BvbnNlID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHVybCA9IGZpbGUudXJsCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHVybCA9IGZpbGUucmVzcG9uc2UuZGF0YS51cmwKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLmdvb2RzLmdhbGxlcnlbaV0gPT09IHVybCkgewogICAgICAgICAgdGhpcy5nb29kcy5nYWxsZXJ5LnNwbGljZShpLCAxKQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHNwZWNDaGFuZ2VkOiBmdW5jdGlvbihsYWJlbCkgewogICAgICBpZiAobGFiZWwgPT09IGZhbHNlKSB7CiAgICAgICAgdGhpcy5zcGVjaWZpY2F0aW9ucyA9IFsKICAgICAgICAgIHsgc3BlY2lmaWNhdGlvbjogJ+inhOagvCcsIHZhbHVlOiAn5qCH5YeGJywgcGljVXJsOiAnJyB9CiAgICAgICAgXQogICAgICAgIHRoaXMucHJvZHVjdHMgPSBbCiAgICAgICAgICB7IGlkOiAwLCBzcGVjaWZpY2F0aW9uczogWyfmoIflh4YnXSwgcHJpY2U6IDAuMCwgbnVtYmVyOiAwLCB1cmw6ICcnIH0KICAgICAgICBdCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zcGVjaWZpY2F0aW9ucyA9IFtdCiAgICAgICAgdGhpcy5wcm9kdWN0cyA9IFtdCiAgICAgIH0KICAgIH0sCiAgICB1cGxvYWRTcGVjUGljVXJsOiBmdW5jdGlvbihyZXNwb25zZSkgewogICAgICB0aGlzLnNwZWNGb3JtLnBpY1VybCA9IHJlc3BvbnNlLmRhdGEudXJsCiAgICB9LAogICAgaGFuZGxlU3BlY2lmaWNhdGlvblNob3coKSB7CiAgICAgIHRoaXMuc3BlY0Zvcm0gPSB7IHNwZWNpZmljYXRpb246ICcnLCB2YWx1ZTogJycsIHBpY1VybDogJycgfQogICAgICB0aGlzLnNwZWNWaXNpYWJsZSA9IHRydWUKICAgIH0sCiAgICBoYW5kbGVTcGVjaWZpY2F0aW9uQWRkKCkgewogICAgICB2YXIgaW5kZXggPSB0aGlzLnNwZWNpZmljYXRpb25zLmxlbmd0aCAtIDEKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnNwZWNpZmljYXRpb25zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgdiA9IHRoaXMuc3BlY2lmaWNhdGlvbnNbaV0KICAgICAgICBpZiAodi5zcGVjaWZpY2F0aW9uID09PSB0aGlzLnNwZWNGb3JtLnNwZWNpZmljYXRpb24pIHsKICAgICAgICAgIGluZGV4ID0gaQogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5zcGVjaWZpY2F0aW9ucy5zcGxpY2UoaW5kZXggKyAxLCAwLCB0aGlzLnNwZWNGb3JtKQogICAgICB0aGlzLnNwZWNWaXNpYWJsZSA9IGZhbHNlCgogICAgICB0aGlzLnNwZWNUb1Byb2R1Y3QoKQogICAgfSwKICAgIGhhbmRsZVNwZWNpZmljYXRpb25EZWxldGUocm93KSB7CiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5zcGVjaWZpY2F0aW9ucy5pbmRleE9mKHJvdykKICAgICAgdGhpcy5zcGVjaWZpY2F0aW9ucy5zcGxpY2UoaW5kZXgsIDEpCiAgICAgIHRoaXMuc3BlY1RvUHJvZHVjdCgpCiAgICB9LAogICAgc3BlY1RvUHJvZHVjdCgpIHsKICAgICAgaWYgKHRoaXMuc3BlY2lmaWNhdGlvbnMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgICAgLy8g5qC55o2uc3BlY2lmaWNhdGlvbnPliJvlu7rkuLTml7bop4TmoLzliJfooagKICAgICAgdmFyIHNwZWNWYWx1ZXMgPSBbXQogICAgICB2YXIgc3BlYyA9IHRoaXMuc3BlY2lmaWNhdGlvbnNbMF0uc3BlY2lmaWNhdGlvbgogICAgICB2YXIgdmFsdWVzID0gW10KICAgICAgdmFsdWVzLnB1c2goMCkKCiAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgdGhpcy5zcGVjaWZpY2F0aW9ucy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGFzcGVjID0gdGhpcy5zcGVjaWZpY2F0aW9uc1tpXS5zcGVjaWZpY2F0aW9uCgogICAgICAgIGlmIChhc3BlYyA9PT0gc3BlYykgewogICAgICAgICAgdmFsdWVzLnB1c2goaSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc3BlY1ZhbHVlcy5wdXNoKHZhbHVlcykKICAgICAgICAgIHNwZWMgPSBhc3BlYwogICAgICAgICAgdmFsdWVzID0gW10KICAgICAgICAgIHZhbHVlcy5wdXNoKGkpCiAgICAgICAgfQogICAgICB9CiAgICAgIHNwZWNWYWx1ZXMucHVzaCh2YWx1ZXMpCgogICAgICB2YXIgcHJvZHVjdHNJbmRleCA9IDAKICAgICAgdmFyIHByb2R1Y3RzID0gW10KICAgICAgdmFyIGNvbWJpbmF0aW9uID0gW10KICAgICAgdmFyIG4gPSBzcGVjVmFsdWVzLmxlbmd0aAogICAgICBmb3IgKHZhciBzID0gMDsgcyA8IG47IHMrKykgewogICAgICAgIGNvbWJpbmF0aW9uW3NdID0gMAogICAgICB9CiAgICAgIHZhciBpbmRleCA9IDAKICAgICAgdmFyIGlzQ29udGludWUgPSBmYWxzZQogICAgICBkbyB7CiAgICAgICAgdmFyIHNwZWNpZmljYXRpb25zID0gW10KICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG47IHgrKykgewogICAgICAgICAgdmFyIHogPSBzcGVjVmFsdWVzW3hdW2NvbWJpbmF0aW9uW3hdXQogICAgICAgICAgc3BlY2lmaWNhdGlvbnMucHVzaCh0aGlzLnNwZWNpZmljYXRpb25zW3pdLnZhbHVlKQogICAgICAgIH0KICAgICAgICBwcm9kdWN0c1twcm9kdWN0c0luZGV4XSA9IHsKICAgICAgICAgIGlkOiBwcm9kdWN0c0luZGV4LAogICAgICAgICAgc3BlY2lmaWNhdGlvbnM6IHNwZWNpZmljYXRpb25zLAogICAgICAgICAgcHJpY2U6IDAuMCwKICAgICAgICAgIG51bWJlcjogMCwKICAgICAgICAgIHVybDogJycKICAgICAgICB9CiAgICAgICAgcHJvZHVjdHNJbmRleCsrCgogICAgICAgIGluZGV4KysKICAgICAgICBjb21iaW5hdGlvbltuIC0gMV0gPSBpbmRleAogICAgICAgIGZvciAodmFyIGogPSBuIC0gMTsgaiA+PSAwOyBqLS0pIHsKICAgICAgICAgIGlmIChjb21iaW5hdGlvbltqXSA+PSBzcGVjVmFsdWVzW2pdLmxlbmd0aCkgewogICAgICAgICAgICBjb21iaW5hdGlvbltqXSA9IDAKICAgICAgICAgICAgaW5kZXggPSAwCiAgICAgICAgICAgIGlmIChqIC0gMSA+PSAwKSB7CiAgICAgICAgICAgICAgY29tYmluYXRpb25baiAtIDFdID0gY29tYmluYXRpb25baiAtIDFdICsgMQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlzQ29udGludWUgPSBmYWxzZQogICAgICAgIGZvciAodmFyIHAgPSAwOyBwIDwgbjsgcCsrKSB7CiAgICAgICAgICBpZiAoY29tYmluYXRpb25bcF0gIT09IDApIHsKICAgICAgICAgICAgaXNDb250aW51ZSA9IHRydWUKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gd2hpbGUgKGlzQ29udGludWUpCgogICAgICB0aGlzLnByb2R1Y3RzID0gcHJvZHVjdHMKICAgIH0sCiAgICBoYW5kbGVQcm9kdWN0U2hvdyhyb3cpIHsKICAgICAgdGhpcy5wcm9kdWN0Rm9ybSA9IE9iamVjdC5hc3NpZ24oe30sIHJvdykKICAgICAgdGhpcy5wcm9kdWN0VmlzaWFibGUgPSB0cnVlCiAgICB9LAogICAgdXBsb2FkUHJvZHVjdFVybDogZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgdGhpcy5wcm9kdWN0Rm9ybS51cmwgPSByZXNwb25zZS5kYXRhLnVybAogICAgfSwKICAgIGhhbmRsZVByb2R1Y3RFZGl0KCkgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucHJvZHVjdHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCB2ID0gdGhpcy5wcm9kdWN0c1tpXQogICAgICAgIGlmICh2LmlkID09PSB0aGlzLnByb2R1Y3RGb3JtLmlkKSB7CiAgICAgICAgICB0aGlzLnByb2R1Y3RzLnNwbGljZShpLCAxLCB0aGlzLnByb2R1Y3RGb3JtKQogICAgICAgICAgYnJlYWsKICAgICAgICB9CiAgICAgIH0KICAgICAgdGhpcy5wcm9kdWN0VmlzaWFibGUgPSBmYWxzZQogICAgfSwKICAgIGhhbmRsZUF0dHJpYnV0ZVNob3coKSB7CiAgICAgIHRoaXMuYXR0cmlidXRlRm9ybSA9IHt9CiAgICAgIHRoaXMuYXR0cmlidXRlVmlzaWFibGUgPSB0cnVlCiAgICB9LAogICAgaGFuZGxlQXR0cmlidXRlQWRkKCkgewogICAgICB0aGlzLmF0dHJpYnV0ZXMudW5zaGlmdCh0aGlzLmF0dHJpYnV0ZUZvcm0pCiAgICAgIHRoaXMuYXR0cmlidXRlVmlzaWFibGUgPSBmYWxzZQogICAgfSwKICAgIGhhbmRsZUF0dHJpYnV0ZURlbGV0ZShyb3cpIHsKICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmF0dHJpYnV0ZXMuaW5kZXhPZihyb3cpCiAgICAgIHRoaXMuYXR0cmlidXRlcy5zcGxpY2UoaW5kZXgsIDEpCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"edit.vue","sourceRoot":"src/views/goods","sourcesContent":["<template>\n  <div class=\"app-container\">\n\n    <el-card class=\"box-card\">\n      <h3>商品维护</h3>\n      <el-form ref=\"goods\" :rules=\"rules\" :model=\"goods\" label-width=\"150px\">\n\n        <el-form-item label=\"商品名称\" prop=\"productName\">\n          <el-input v-model=\"goods.productName\"/>\n        </el-form-item>\n      \n        <el-form-item label=\"参考价格\" prop=\"productPrice\">\n          <el-input v-model=\"goods.productPrice\" placeholder=\"0.00\">\n            <template slot=\"append\">元</template>\n          </el-input>\n        </el-form-item>\n       \n        <el-form-item label=\"商品图片\">\n          <el-upload\n            :action=\"uploadPath\"\n            :show-file-list=\"false\"\n            :headers=\"headers\"\n            :on-success=\"uploadPicUrl\"\n            class=\"avatar-uploader\"\n            accept=\".jpg,.jpeg,.png,.gif\">\n            <img v-if=\"goods.productImage\" :src=\"goods.productImage\" class=\"avatar\">\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"/>\n          </el-upload>\n        </el-form-item>\n\n\n        <el-form-item label=\"商品等级\">\n          <el-select v-model=\"goods.productLevelId\">\n            <el-option v-for=\"item in productLevels\" :key=\"item.levelId\" :label=\"item.levelName\" :value=\"item.levelId\"/>\n          </el-select>\n        </el-form-item>\n\n\n         <el-form-item label=\"所属系列\">\n          <el-select v-model=\"goods.productSeriesId\">\n            <el-option v-for=\"item in productSeriesList\" :key=\"item.seriesId\" :label=\"item.seriesName\" :value=\"item.seriesId\"/>\n          </el-select>\n        </el-form-item>\n\n        <el-form-item label=\"商品简介\">\n          <el-input v-model=\"goods.brief\"/>\n        </el-form-item>\n\n      </el-form>\n    </el-card>\n\n    <div class=\"op-container\">\n      <el-button @click=\"handleCancel\">取消</el-button>\n      <el-button type=\"primary\" @click=\"handleEdit\">更新商品</el-button>\n    </div>\n\n  </div>\n</template>\n\n<style>\n.el-card {\n  margin-bottom: 10px;\n}\n.el-tag + .el-tag {\n  margin-left: 10px;\n}\n.input-new-keyword {\n  width: 90px;\n  margin-left: 10px;\n  vertical-align: bottom;\n}\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #20a0ff;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 120px;\n  height: 120px;\n  line-height: 120px;\n  text-align: center;\n}\n.avatar {\n  width: 145px;\n  height: 145px;\n  display: block;\n}\n</style>\n\n<script>\nimport { getProductById, getProductLevels, getProductSeries, getProductList, updateProduct } from '@/api/business/goods'\nimport { createStorage, uploadPath } from '@/api/business/storage'\n\nimport { MessageBox } from 'element-ui'\nimport { getToken } from '@/utils/auth'\n\nexport default {\n  name: 'GoodsEdit',\n  data() {\n    return {\n      uploadPath,\n      newKeywordVisible: false,\n      newKeyword: '',\n      keywords: [],\n      galleryFileList: [],\n      categoryList: [],\n      brandList: [],\n      categoryIds: [],\n      goods: { gallery: [] },\n      productSeriesList: [],\n      productLevels: [],\n      specVisiable: false,\n      specForm: { specification: '', value: '', picUrl: '' },\n      specifications: [{ specification: '规格', value: '标准', picUrl: '' }],\n      productVisiable: false,\n      productForm: {\n        id: 0,\n        specifications: [],\n        price: 0.0,\n        number: 0,\n        url: ''\n      },\n      attributeVisiable: false,\n      attributeForm: { attribute: '', value: '' },\n      attributes: [],\n      rules: {\n        goodsSn: [\n          { required: true, message: '商品编号不能为空', trigger: 'blur' }\n        ],\n        name: [{ required: true, message: '商品名称不能为空', trigger: 'blur' }]\n      },\n      editorInit: {\n        language: 'zh_CN',\n        convert_urls: false,\n        plugins: [\n          'advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools importcss insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount'\n        ],\n        toolbar: [\n          'searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample',\n          'hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen'\n        ],\n        images_upload_handler: function(blobInfo, success, failure) {\n          const formData = new FormData()\n          formData.append('file', blobInfo.blob())\n          createStorage(formData)\n            .then(res => {\n              success(res.data.data.url)\n            })\n            .catch(() => {\n              failure('上传失败，请重新上传')\n            })\n        }\n      }\n    }\n  },\n  computed: {\n    headers() {\n      return {\n        'X-Dts-Admin-Token': getToken()\n      }\n    }\n  },\n  created() {\n    this.init()\n  },\n  methods: {\n    init: function() {\n      const productId = this.$route.query.productId\n      if (productId == null) {\n        return\n      }\n      getProductById({\"productId\" : productId}).then(response => {\n        this.goods = response.data.data\n      })\n\n      getProductSeries().then(response => {\n        this.productSeriesList = response.data.data.items\n      })\n\n      getProductLevels().then(response => {\n        this.productLevels = response.data.data.items\n      })\n    },\n    handleCategoryChange(value) {\n      this.goods.categoryId = value[value.length - 1]\n    },\n    handleCancel: function() {\n      this.$router.push({ path: '/goods/list' })\n    },\n    handleEdit: function() {\n      updateProduct(this.goods)\n        .then(response => {\n          this.$notify.success({\n            title: '成功',\n            message: '创建成功'\n          })\n          this.$router.push({ path: '/goods/list' })\n        })\n        .catch(response => {\n          MessageBox.alert('业务错误：' + response.data.errmsg, '警告', {\n            confirmButtonText: '确定',\n            type: 'error'\n          })\n        })\n    },\n    handleClose(tag) {\n      this.keywords.splice(this.keywords.indexOf(tag), 1)\n      this.goods.keywords = this.keywords.toString()\n    },\n    showInput() {\n      this.newKeywordVisible = true\n      this.$nextTick(_ => {\n        this.$refs.newKeywordInput.$refs.input.focus()\n      })\n    },\n    handleInputConfirm() {\n      const newKeyword = this.newKeyword\n      if (newKeyword) {\n        this.keywords.push(newKeyword)\n        this.goods.keywords = this.keywords.toString()\n      }\n      this.newKeywordVisible = false\n      this.newKeyword = ''\n    },\n    uploadPicUrl: function(response) {\n      this.goods.picUrl = response.data.url\n    },\n    uploadOverrun: function() {\n      this.$message({\n        type: 'error',\n        message: '上传文件个数超出限制!最多上传5张图片!'\n      })\n    },\n    handleGalleryUrl(response, file, fileList) {\n      if (response.errno === 0) {\n        this.goods.gallery.push(response.data.url)\n      }\n    },\n    handleRemove: function(file, fileList) {\n      for (var i = 0; i < this.goods.gallery.length; i++) {\n        // 这里存在两种情况\n        // 1. 如果所删除图片是刚刚上传的图片，那么图片地址是file.response.data.url\n        //    此时的file.url虽然存在，但是是本机地址，而不是远程地址。\n        // 2. 如果所删除图片是后台返回的已有图片，那么图片地址是file.url\n        var url\n        if (file.response === undefined) {\n          url = file.url\n        } else {\n          url = file.response.data.url\n        }\n\n        if (this.goods.gallery[i] === url) {\n          this.goods.gallery.splice(i, 1)\n        }\n      }\n    },\n    specChanged: function(label) {\n      if (label === false) {\n        this.specifications = [\n          { specification: '规格', value: '标准', picUrl: '' }\n        ]\n        this.products = [\n          { id: 0, specifications: ['标准'], price: 0.0, number: 0, url: '' }\n        ]\n      } else {\n        this.specifications = []\n        this.products = []\n      }\n    },\n    uploadSpecPicUrl: function(response) {\n      this.specForm.picUrl = response.data.url\n    },\n    handleSpecificationShow() {\n      this.specForm = { specification: '', value: '', picUrl: '' }\n      this.specVisiable = true\n    },\n    handleSpecificationAdd() {\n      var index = this.specifications.length - 1\n      for (var i = 0; i < this.specifications.length; i++) {\n        const v = this.specifications[i]\n        if (v.specification === this.specForm.specification) {\n          index = i\n        }\n      }\n\n      this.specifications.splice(index + 1, 0, this.specForm)\n      this.specVisiable = false\n\n      this.specToProduct()\n    },\n    handleSpecificationDelete(row) {\n      const index = this.specifications.indexOf(row)\n      this.specifications.splice(index, 1)\n      this.specToProduct()\n    },\n    specToProduct() {\n      if (this.specifications.length === 0) {\n        return\n      }\n      // 根据specifications创建临时规格列表\n      var specValues = []\n      var spec = this.specifications[0].specification\n      var values = []\n      values.push(0)\n\n      for (var i = 1; i < this.specifications.length; i++) {\n        const aspec = this.specifications[i].specification\n\n        if (aspec === spec) {\n          values.push(i)\n        } else {\n          specValues.push(values)\n          spec = aspec\n          values = []\n          values.push(i)\n        }\n      }\n      specValues.push(values)\n\n      var productsIndex = 0\n      var products = []\n      var combination = []\n      var n = specValues.length\n      for (var s = 0; s < n; s++) {\n        combination[s] = 0\n      }\n      var index = 0\n      var isContinue = false\n      do {\n        var specifications = []\n        for (var x = 0; x < n; x++) {\n          var z = specValues[x][combination[x]]\n          specifications.push(this.specifications[z].value)\n        }\n        products[productsIndex] = {\n          id: productsIndex,\n          specifications: specifications,\n          price: 0.0,\n          number: 0,\n          url: ''\n        }\n        productsIndex++\n\n        index++\n        combination[n - 1] = index\n        for (var j = n - 1; j >= 0; j--) {\n          if (combination[j] >= specValues[j].length) {\n            combination[j] = 0\n            index = 0\n            if (j - 1 >= 0) {\n              combination[j - 1] = combination[j - 1] + 1\n            }\n          }\n        }\n        isContinue = false\n        for (var p = 0; p < n; p++) {\n          if (combination[p] !== 0) {\n            isContinue = true\n          }\n        }\n      } while (isContinue)\n\n      this.products = products\n    },\n    handleProductShow(row) {\n      this.productForm = Object.assign({}, row)\n      this.productVisiable = true\n    },\n    uploadProductUrl: function(response) {\n      this.productForm.url = response.data.url\n    },\n    handleProductEdit() {\n      for (var i = 0; i < this.products.length; i++) {\n        const v = this.products[i]\n        if (v.id === this.productForm.id) {\n          this.products.splice(i, 1, this.productForm)\n          break\n        }\n      }\n      this.productVisiable = false\n    },\n    handleAttributeShow() {\n      this.attributeForm = {}\n      this.attributeVisiable = true\n    },\n    handleAttributeAdd() {\n      this.attributes.unshift(this.attributeForm)\n      this.attributeVisiable = false\n    },\n    handleAttributeDelete(row) {\n      const index = this.attributes.indexOf(row)\n      this.attributes.splice(index, 1)\n    }\n  }\n}\n</script>\n"]}]}